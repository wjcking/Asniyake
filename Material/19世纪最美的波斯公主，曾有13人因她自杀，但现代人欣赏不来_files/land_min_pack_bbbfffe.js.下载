function QR8bitByte(t){this.mode=QRMode.MODE_8BIT_BYTE,this.data=t}function QRCode(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}function QRPolynomial(t,e){var n,i;if(void 0==t.length)throw new Error(t.length+"/"+e);for(n=0;n<t.length&&0==t[n];)n++;for(this.num=new Array(t.length-n+e),i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function QRRSBlock(t,e){this.totalCount=t,this.dataCount=e}function QRBitBuffer(){this.buffer=new Array,this.length=0}function QR8bitByte(t){this.mode=QRMode.MODE_8BIT_BYTE,this.data=t}function QRCode(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}function QRPolynomial(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function QRRSBlock(t,e){this.totalCount=t,this.dataCount=e}function QRBitBuffer(){this.buffer=new Array,this.length=0}function utf16to8(t){var e,n,i,o;for(e="",i=t.length,n=0;i>n;n++)o=t.charCodeAt(n),o>=1&&127>=o?e+=t.charAt(n):o>2047?(e+=String.fromCharCode(224|o>>12&15),e+=String.fromCharCode(128|o>>6&63),e+=String.fromCharCode(128|o>>0&63)):(e+=String.fromCharCode(192|o>>6&31),e+=String.fromCharCode(128|o>>0&63));return e}function utf8to16(t){var e,n,i,o,r,a;for(e="",i=t.length,n=0;i>n;)switch(o=t.charCodeAt(n++),o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=t.charAt(n-1);break;case 12:case 13:r=t.charCodeAt(n++),e+=String.fromCharCode((31&o)<<6|63&r);break;case 14:r=t.charCodeAt(n++),a=t.charCodeAt(n++),e+=String.fromCharCode((15&o)<<12|(63&r)<<6|(63&a)<<0)}return e}!function(t,e){function n(t,e){if(t instanceof Array){for(var n=0,i=t.length;i>n;n++)if(e.call(t[n],t[n],n)===!1)return}else for(var n in t)if(t.hasOwnProperty(n)&&e.call(t[n],t[n],n)===!1)return}function i(t,e){if(this.svnMod="",this.name=null,this.path=t,this.fn=null,this.exports={},this._loaded=!1,this._requiredStack=[],this._readyStack=[],i.cache[this.path]=this,e&&"."!==e.charAt(0)){var n=e.split(":");n.length>1?(this.svnMod=n[0],this.name=n[1]):this.name=e}this.svnMod||(this.svnMod=this.path.split("/js/")[0].substr(1)),this.type="js",this.getKey=function(){return this.svnMod+":"+this.name},this._info={}}function o(t,e){var n="css"==e,i=document.createElement(n?"link":"script");return i}function r(e,n,i){function r(){r.isCalled||(r.isCalled=!0,clearTimeout(l),i&&i())}var c=o(e,n);"SCRIPT"===c.nodeName?a(c,r):s(c,r);var l=setTimeout(function(){throw new Error("load "+n+" timeout : "+e)},t._loadScriptTimeout||1e4),d=document.getElementsByTagName("head")[0];"css"==n?(c.rel="stylesheet",c.href=e,d.appendChild(c)):(c.type="text/javascript",c.charset="utf-8",c.src=e,d.insertBefore(c,d.firstChild))}function a(t,e){t.onload=t.onerror=t.onreadystatechange=function(){if(/loaded|complete|undefined/.test(t.readyState)){if(t.onload=t.onerror=t.onreadystatechange=null,t.parentNode){t.parentNode.removeChild(t);try{if(t.clearAttributes)t.clearAttributes();else for(var n in t)delete t[n]}catch(i){}}t=void 0,e&&e()}}}function s(t,e){t.attachEvent?t.attachEvent("onload",e):setTimeout(function(){c(t,e)},0)}function c(t,e){if(!e||!e.isCalled){var n,i=navigator.userAgent,o=~i.indexOf("AppleWebKit"),r=~i.indexOf("Opera");if(o||r)t.sheet&&(n=!0);else if(t.sheet)try{t.sheet.cssRules&&(n=!0)}catch(a){("SecurityError"===a.name||"NS_ERROR_DOM_SECURITY_ERR"===a.name)&&(n=!0)}setTimeout(function(){n?e&&e():c(t,e)},1)}}t.each=n,i.currentPath="",i.loadedPaths={},i.loadingPaths={},i.cache={},i.paths={},i.handlers=[],i.moduleFileMap={},i.requiredPaths={},i.lazyLoadPaths={},i.services={},i.isPathsLoaded=function(t){var e=!0;return n(t,function(t){return t in i.loadedPaths?void 0:e=!1}),e},i.require=function(t,e){t.search(":")<0&&(e||(e="superman",i.currentPath&&(e=i.currentPath.split("/js/")[0].substr(1))),t=e+":"+t);var n=i.get(t,i.currentPath);if("css"!=n.type){if(n){if(!n._inited){n._inited=!0;var o,r=n.svnMod;(o=n.fn.call(null,function(t){return i.require(t,r)},n.exports,new u(n.name,r)))&&(n.exports=o)}return n.exports}throw new Error('Module "'+t+'" not found!')}},i.baseUrl=e?"/"==e[e.length-1]?e:e+"/":"/",i.getBasePath=function(t){var e,n;return-1!==(n=t.indexOf("/"))&&(e=t.slice(0,n)),e&&e in i.paths?i.paths[e]:i.baseUrl},i.getJsPath=function(e,n){if("."===e.charAt(0)){n=n.replace(/\/[^\/]+\/[^\/]+$/,""),0===e.search("./")&&(e=e.substr(2));var o=0;for(e=e.replace(/^(\.\.\/)+/g,function(t){return o=t.length/3,""});o>0;)n=n.substr(0,n.lastIndexOf("/")),o--;return n+"/"+e+"/"+e.substr(e.lastIndexOf("/")+1)+".js"}var r,a,s,c,l,d;if(e.search(":")>=0){var u=e.split(":");r=u[0],e=u[1]}else n&&(r=n.split("/")[1]);r=r||"superman";var h=/\.css(?:\?|$)/i.test(e);h&&(i.moduleFileMap[r][e]?t._useConfig&&(e=i.moduleFileMap[r][e]):!t._useConfig&&alert(e+"没有配置在config.js中"));var e=l=e,f=i.getBasePath(e);return-1!==(s=e.indexOf("/"))&&(a=e.slice(0,s),c=e.lastIndexOf("/"),l=e.slice(c+1)),a&&a in i.paths&&(e=e.slice(s+1)),d=f+r+"/js/"+e+".js"},i.get=function(t,e){var n=i.getJsPath(t,e);return i.cache[n]?i.cache[n]:new i(n,t)},i.prototype={load:function(){i.loadingPaths[this.path]=!0;var e=this.svnMod||"superman",n=s_domain.staticUrl+"static/"+e+"/",o=this,r=/\.css(?:\?|$)/i.test(this.name);this.type=r?"css":"js";var a="/"+this.type+"/"+i.moduleFileMap[e][this.name];if(n+=t._useConfig&&i.moduleFileMap[e][this.name]?this.type+"/"+i.moduleFileMap[e][this.name]:this.type+"/"+this.name+(r?"":".js"),$.inArray(a,t._firstScreenCSS)>=0||t._useConfig&&$.inArray(a,t._firstScreenJS)>=0)r?setTimeout(function(){o._loaded=!0,o.ready()},1):(o._loaded=!0,o.ready());else{var s=(new Date).getTime();l.create({src:n,type:this.type,loaded:function(){o._info.loadedTime=(new Date).getTime()-s,"css"==o.type&&(o._loaded=!0,o.ready())}})}},lazyLoad:function(){if(this.name,i.lazyLoadPaths[this.getKey()])this.define(),delete i.lazyLoadPaths[this.getKey()];else{if(this.exist())return;i.requiredPaths[this.getKey()]=!0,this.load()}},ready:function(t,e){var o=e?this._requiredStack:this._readyStack;if(t)this._loaded?t():o.push(t);else{if(i.loadedPaths[this.path]=!0,delete i.loadingPaths[this.path],this._loaded=!0,i.currentPath=this.path,this._readyStack&&this._readyStack.length>0){this._inited=!0;var r,a=this.svnMod;(r=this.fn.call(null,function(t){return i.require(t,a)},this.exports,new u(this.name,a)))&&(this.exports=r),n(this._readyStack,function(t){t()}),delete this._readyStack}this._requiredStack&&this._requiredStack.length>0&&(n(this._requiredStack,function(t){t()}),delete this._requiredStack)}},define:function(){var t=this,e=this.deps,o=(this.path,[]);e||(e=this.getDependents()),e.length?(n(e,function(e){o.push(i.getJsPath(e,t.path))}),n(e,function(e){var n=i.get(e,t.path);n.ready(function(){i.isPathsLoaded(o)&&t.ready()},!0),n.lazyLoad()})):this.ready()},exist:function(){var t=this.path;return t in i.loadedPaths||t in i.loadingPaths},getDependents:function(){var t=this.fn.toString(),e=t.match(/function\s*\(([^,]*),/i),i=new RegExp("[^.]\\b"+e[1]+"\\(\\s*('|\")([^()\"']*)('|\")\\s*\\)","g"),o=t.match(i),r=[];return o&&n(o,function(t,n){r[n]=t.substr(e[1].length+3).slice(0,-2)}),r}};var l={create:function(t){var e=t.src;e in this._paths||(this._paths[e]=!0,n(this._rules,function(t){e=t.call(null,e)}),r(e,t.type,t.loaded))},_paths:{},_rules:[],addPathRule:function(t){this._rules.push(t)}};t.version="1.0",t.use=function(t,e){"string"==typeof t&&(t=[t]);var o=[],r=[];n(t,function(t,e){r[e]=!1}),n(t,function(t,a){var s=i.get(t),c=s._loaded;s.ready(function(){var t=s.exports||{};t._INFO=s._info,t._INFO&&(t._INFO.isNew=!c),o[a]=t,r[a]=!0;var i=!0;n(r,function(t){return t===!1?i=!1:void 0}),e&&i&&e.apply(null,o)}),s.lazyLoad()})},t.module=function(t,e,n){var o=i.get(t);o.fn=e,o.deps=n,i.requiredPaths[o.getKey()]?o.define():i.lazyLoadPaths[o.getKey()]=!0},t.pathRule=function(t){l.addPathRule(t)},t._addPath=function(t,e){if("/"!==e.slice(-1)&&(e+="/"),t in i.paths)throw new Error(t+" has already in Module.paths");i.paths[t]=e};var d="superman";t._setMod=function(t){d=t||"superman"},t._fileMap=function(e,o){if("object"==typeof e)n(e,function(e,n){t._fileMap(n,e)});else{var r=d;"string"==typeof o&&(o=[o]),e=1==e.indexOf("js/")?e.substr(4):e,e=1==e.indexOf("css/")?e.substr(5):e;var a=i.moduleFileMap[r];a||(a={}),n(o,function(t){a[t]||(a[t]=e)}),i.moduleFileMap[r]=a}},t._eventMap={},t.call=function(e,n){for(var i=[],o=2,r=arguments.length;r>o;o++)i.push(arguments[o]);t.use(e,function(t){for(var e=n.split("."),o=0,r=e.length;r>o;o++)t=t[e[o]];t&&t.apply(this,i)})},t._setContext=function(t){"object"==typeof t&&n(t,function(t,e){u.prototype[e]=i.require(t)})},t._setContextMethod=function(t,e){u.prototype[t]=e};var u=function(t,e){this.modName=t,this.svnMod=e};u.prototype={domain:s_domain,session:s_session,use:function(e,n){"string"==typeof e&&(e=[e]);for(var i=e.length-1;i>=0;i--)e[i]=this.svnMod+":"+e[i];t.use(e,n)}},t._Context=u,t.addLog=function(e,n){t.use("superman:lib/log",function(t){t.defaultLog(e,n)})},t.fire=function(e,n,i){t.use("superman:lib/mod_evt",function(t){t.fire(e,n,i)})},t._defService=function(t,e){if(t){var o=i.services[t];o=o||{},n(e,function(t,e){o[e]=t}),i.services[t]=o}},t.getService=function(e,n,o){var r=i.services[e];if(!r)throw new Error(e+" mod didn't define any services");var a=r[n];if(!a)throw new Error(e+" mod didn't provide service "+n);t.use(e+":"+a,o)}}(function(){return window.F={}}()),$.extend({browser:{chrome:/chrome\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp.$1:void 0,firefox:/firefox\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp.$1:void 0,ie:/msie (\d+\.\d+)|Trident/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,isGecko:/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),isWebkit:/webkit/i.test(navigator.userAgent),opera:/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp.$6||RegExp.$2):void 0,safari:/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent)?+(RegExp.$1||RegExp.$2):void 0,isSogouIE:navigator.userAgent.toLowerCase().indexOf("msie")>0&&navigator.userAgent.toLowerCase().indexOf("se")>0&&-1==navigator.userAgent.toLowerCase().indexOf("360se"),isBaidu:/BIDUBrowser/i.test(navigator.userAgent),edge:/edge\/(\d+)/i.test(navigator.userAgent)?+RegExp.$1:void 0}}),$.extend({isIE:$.browser.ie,isIE6:6==$.browser.ie,isBaidu:$.browser.isBaidu}),$.extend({url:{escapeReg:function(t){return String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")},escapeSSL:function(t){if("http:"===s_domain.protocol||0==t.indexOf("https:"))return t;var e=s_domain.ssllist||{},n=/^(http[s]?:\/\/)?([^\/]+)(.*)/,i=t.match(n),o=e.hasOwnProperty(i[2])&&e[i[2]]+i[3];return o?"https://"+o:((new Image).src="/home/page/data/pageserver?errno=7008&errurl="+encodeURIComponent(t)+"&_t="+1*new Date,$.browser.chrome?t:t.replace(/http:/,"https:"))},getQueryValue:function(t,e){var n=new RegExp("(^|&|\\?|#)"+$.url.escapeReg(e)+"=([^&#]*)(&|$|#)",""),i=t.match(n);return i?i[2]:null},escapeSymbol:function(t){return String(t).replace(/[#%&+=\/\\\ \　\f\r\n\t]/g,function(t){return"%"+(256+t.charCodeAt()).toString(16).substring(1).toUpperCase()})},jsonToQuery:function(t){var e,n=[];return $.each(t,function(t,i){if($.isArray(i))for(e=i.length;e--;)n.push(t+"="+encodeURIComponent(i[e]));else n.push(t+"="+encodeURIComponent(i))}),n.join("&")},queryToJson:function(t){for(var e,n,i,o,r=t.substr(t.lastIndexOf("?")+1),a=r.split("&"),s=a.length,c={},l=0;s>l;l++)a[l]&&(o=a[l].split("="),e=o[0],n=o[1],i=c[e],"undefined"==typeof i?c[e]=n:$.isArray(i)?i.push(n):c[e]=[i,n]);return c}}}),F._setMod("superlanding"),F._fileMap({"/css/landing_min.css?v=md5":["reset.css","frame.css","header.css","article.css","relatedNews.css","recentArticle.css","author.css","bottom.css","error.css","searchDiversion.css","qrcode.css"],"/js/landing_min.js?v=md5":["lib/base","lib/browser","lib/url","config","lib/promise-polyfill","lib/thunder","lib/spy","lib/commission","lib/comment","lib/stringify","lib/ishttps","article/usrMenu","article/topBtm","article/log","article/adProfit","article/qrcode"]}),F._useConfig=!0,!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}function e(t){return new this(function(e,n){function i(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,function(e){i(t,e)},function(n){o[t]={status:"rejected",reason:n},0==--r&&e(o)})}o[t]={status:"fulfilled",value:n},0==--r&&e(o)}if(!t||"undefined"==typeof t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var r=o.length,a=0;o.length>a;a++)i(a,o[a])})}function n(t){return!(!t||"undefined"==typeof t.length)}function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function r(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(o){return void s(e.promise,o)}a(e.promise,i)}else(1===t._state?a:s)(e.promise,t._value)})):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,c(t)}catch(i){s(t,i)}}function s(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;n>e;e++)r(t,t._deferreds[e]);t._deferreds=null}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,s(e,t))})}catch(i){if(n)return;n=!0,s(e,i)}}var d=setTimeout;o.prototype["catch"]=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return r(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype["finally"]=t,o.all=function(t){return new o(function(e,i){function o(t,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,function(e){o(t,e)},i)}r[t]=n,0==--a&&e(r)}catch(c){i(c)}}if(!n(t))return i(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);for(var a=r.length,s=0;r.length>s;s++)o(s,r[s])})},o.allSettled=e,o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,i){if(!n(t))return i(new TypeError("Promise.race accepts an array"));for(var r=0,a=t.length;a>r;r++)o.resolve(t[r]).then(e,i)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){d(t,0)},o._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var u=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"function"!=typeof u.Promise?u.Promise=o:u.Promise.prototype["finally"]?u.Promise.allSettled||(u.Promise.allSettled=e):u.Promise.prototype["finally"]=t}),!function(t){function e(t){var e=this;e.opt=t||{},e.baseParams=e.opt.baseParams||{},e.config(t,!0),t.autoBind&&e.bindLogHook(),n(e,o)}function n(t,e){if(!e||!t)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var i={PROTOTYPE:"prototype",INSTANCE:"instance",SINGLETON:"singleton",STATICTYPE:"static"},o={};e.prototype={config:function(t){var e=this;return n(e.opt,t),e.baseURL=e.opt.baseURL||"//hpd.baidu.com/v.gif",e.domHook=e.opt.domHook||"data-stats",e.mainDom=e.opt.mainDom,e.skipPrevent=!!e.opt.skipPrevent,e.logRegx=e.opt.logRegx||"(.*?):(.*?);",e.baseParams=n(e.baseParams,t.baseParams),e},send:function(t,e,i){var o=this;o.__sendPreHook&&o.__sendPreHook(t);var r="l"+Date.now(),a=window[r]=new Image,s="",c=null;i=i||o.baseURL,a.onload=a.onerror=a.onabort=function(){window[r]=null,c&&(clearTimeout(c),c=null,e&&e(),o.__sendAfrHook&&o.__sendAfrHook(t,!1))},t=t||{},t.r=r;var l=o.baseParams;t=n(n({},l),t);for(var d in t)t.hasOwnProperty(d)&&(s+="&"+d+"="+encodeURIComponent(t[d]));return a.src=i+"?"+s.slice(1),"function"==typeof e&&(c=setTimeout(function(){c=null,e()},500)),o.__sendAfrHook&&o.__sendAfrHook(t,!0),o},bindLogHook:function(t,e){var n=this;t=$(t?t:n.mainDom),t&&t.on("click",e||"["+n.domHook+"]",function(t){n.hookClick.call(n,this,t)})},hookClick:function(e,n){for(var i=this,o=e.getAttribute(i.domHook),r=e.getAttribute("data-stopskip"),a=e.getAttribute("href"),s=null,c={},l=new RegExp(i.logRegx,"g"),d=null;d=l.exec(o);)c[d[1]]=d[2];"a"===e.tagName.toLowerCase()&&a&&r&&(n.preventDefault(),s=function(){t.location.href=a}),i.send(c,s)}};var r=null,a={create:function(t){return new e(t)},extend:function(t,r){switch(r){case i.PROTOTYPE:n(e.prototype,t);break;case i.STATICTYPE:n(e,t);break;case i.INSTANCE:case i.SINGLETON:default:n(o,t)}},get:function(t){return r||(r=this.create(t))}};t.Thunder=a}(this),F.module("superlanding:lib/spy",function(t,e){function n(t,e,n){var i=document.createElement("script");e&&(i.id=e),i.type="text/javascript",i.src=t,document.body.appendChild(i),i.onload=i.onreadystatechange=function(){/undefined|loaded|complete/.test(this.readyState)&&(n&&n(),i.onload=i.onreadystatechange=null)}}var i=0;e.sendPerfLog=function(){var t=window.startTime,e=window.performance;e&&e.timing&&(t=e.timing.navigationStart),window.__spyClinet?window.__spyClinet.sendPerf({group:"landingpc_old",info:{whiteScreen:window.whiteScreenTime-t,firstScreen:window.firstScreenTime-t,domReady:window.domReadyTime-t,loaded:window.loadedTime-t}}):3>i&&setTimeout(function(){sendPerfLog(),i++},1e3)},e.init=function(){n("https://b.bdstatic.com/searchbox/icms/searchbox/js/spy-client@2.0.3/spy-client-basic.min.js","s_spy_script",function(){window.__spyClinet=new SpyClient({pid:"10_75",sample:.1})})}}),!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.Commision=e()}(this,function(){var t=function(){return"object"==typeof t.instance?t.instance:(this.baseParams={},void(t.instance=this))};return t.prototype={commissionInit:function(t){var e={has_finish_read:1,is_valid:1,ct:t.ct,cst:1,distribute_channel:t.distributeChannel,time:+Date.now(),traffic_type:t.trafficType,content_id:t.nid,CTK:0,PVID:t.pvid,baiduid:t.baiduid,stay_time:0,logtype:"",dtime:t.dtime,content_type:t.contentType,content_url:t.contentUrl||encodeURIComponent(location.href),grade:t.grade,create_time_acc_level:t.create_time_acc_level||0,UserAgent:navigator.userAgent,content_platform_id:t.contentPlatformId||0,osid:t.osid,hybridVersion:t.hybridVersion||null,boxVersion:t.boxVersion||null,nettype:t.nettype||4,page_type:1,content_acc_type:t.contentAccType,is_from_3rd:0,"3rd_party_channel_id":0};+t.isBjh?(e.content_acc_id=void 0===t.uk?"FFFFFFFFFFFFFFFF":t.uk,e.isUk=1):(e.content_acc_id="FFFFFFFFFFFFFFFF",t.resourceId&&(e.content_source_id=t.resourceId)),this.baseParams=e},dataClone:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},getPageShowParams:function(t){var e=this,n=e.dataClone(e.baseParams);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},sendLog:function(t,e){for(var n in t)(void 0===t[n]||""===t[n])&&console.error("分润参数"+n+"的值不能为undefined或空字符串");if("object"==typeof e&&"function"==typeof e.send)e.send(t);else{var i="",o="https://hpd.baidu.com/v.gif?has_property=0";for(var r in t)t.hasOwnProperty(r)&&(i+="&"+r+"="+encodeURIComponent(t[r]));var a=new Image;a.src=o+i}}},t}),!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t=t||self).xbox=t.xbox||{},t.xbox["comment-pc"]={}))}(this,function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return u(this,n)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function p(t,e){return function(t){return Array.isArray(t)?t:void 0}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}}(t,e)||m(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t){return function(t){return Array.isArray(t)?v(t):void 0}(t)||function(t){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(t)?Array.from(t):void 0}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);e>n;n++)i[n]=t[n];return i}function b(t,e){return pe(t)===e.toLowerCase()}function y(t){return null==t}function x(t){return!!b(t,"Object")&&(null===Object.getPrototypeOf(t)||Object===t.constructor)}function w(t){return b(t,"Function")}function k(t){return b(t,"String")}function _(t){return b(t,"Array")}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y(t)?e:k(t)?t:String(t)}function E(t){return me.opera.test(t)?"Opera":me.firefox.test(t)?"Firefox":me.ie.test(t)||me.ie11.test(t)?"IE":me.edge.test(t)?"Edge":me.chrome.test(t)?"Chrome":me.safari.test(t)?"Safari":"other"}function R(t){return t.map(function(t){switch(pe(t)){case"string":return t;case"function":return Qe(t);default:return t}})}function T(t){return b(t,"function")}function P(t){var n=t.url,i=t.before,o=t.success,r=t.error,a=t.timeout,s=void 0===a?2e4:a,c=t.async,l=t.data,d=t.jsonpCallback;"object"===e(l)&&(l=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(k(t))return t;var n=[];for(var i in t){var o=t[i];_(o)?o=JSON.stringify(R(o)):y(o)?o="":x(o)?o=JSON.stringify(o):w(o)&&(o=Qe(o)),n.push("".concat(i,"=").concat(e?Ne(o):o))}return n.join("&")}(l)),l&&(n+=(-1===n.indexOf("?")?"?":"&")+l),n=n.replace(/[&?]{1,2}/,"?");var u,h=(T(d)?d():d)||"_boxjsonp"+Be(),f=window[h];window[h]=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];u=e},/=\?/.test(n)&&(n=n.replace(/=\?/,"="+h)),function(t,e,n){var i,o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=document,s=t.replace(/^(css|img)!/,""),c=!1,l=n.async,d=void 0===l||l,u=n.maxTries,h=void 0===u?1:u,f=n.timeout,p=void 0===f?2e4:f,g=n.before,m=void 0===g?null:g,v=m;"function"!=typeof v&&(v=Ue),/(^css!|\.css$)/.test(t)?(c=!0,(i=a.createElement("link")).rel="stylesheet",i.href=s):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(i=a.createElement("img")).src=s:((i=a.createElement("script")).src=t,i.async=!!d);var b=function(a){var s;if(clearTimeout(o),s=a instanceof Error?"e":a.type[0],c&&"hideFocus"in i)try{i.sheet.cssText.length||(s="e")}catch(l){s="e"}return"e"===s&&(r+=1)<h?l(t,e,n,r):(i.onload=i.onerror=i.onbeforeload=null,i=null,void e("e"===s?a||"error":null,t))};if(i.onload=i.onerror=b,!1!==v(t,i)){var y=a.head||a.getElementsByTagName("script")[0];y.appendChild(i),p>0&&(o=setTimeout(function(){b(new Error("timeout"))},p))}}(n,function(t,e){t?r(t,e):o(u&&u[0]),window[h]=f,u&&T(f)&&f(u[0]),f=u=void 0},{timeout:s,async:c,before:i})}function S(t,e,n,i){return function(t,e,n,i,o,r){var a=function(t){return t._bid||(t._bid=Be())}(t),s=ze[a]||(ze[a]=[]);!function(t,e,n){t.split(/\s/).forEach(function(t){n(t,e)})}(e,n,function(e,n){var a=function(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}(e);a.fn=n,a.sel=i,a.e in qe&&(n=function(t){var e=t.relatedTarget;return!e||e!==this&&!M(this,e)?a.fn.apply(this,arguments):void 0}),a.del=o&&o(n,e);var c=a.del||n;a.proxy=function(e){var n=c.apply(t,[e].concat(e.data));return!1===n&&(e.preventDefault(),e.stopPropagation()),n},a.i=s.length,s.push(a),"addEventListener"in t&&t.addEventListener(function(t){return qe[t]||t}(a.e),a.proxy,function(t,e){return t.del&&("focus"===t.e||"blur"===t.e)||!!e}(a,r))})}(t,n,i,e,function(n){return function(i){var o,r=L(i.target,e,t);if(r){(o=I(i)).currentTarget=r,o.liveFired=t;for(var a=arguments.length,s=new Array(a>1?a-1:0),c=1;a>c;c++)s[c-1]=arguments[c];return n.apply(r,[o].concat(s))}}})}function I(t){var e,n={originalEvent:t};for(e in t)Ve.test(e)||void 0===t[e]||(n[e]=t[e]);return $e(Ye,function(e,i){n[i]=function(){return this[e]=Ge,t[i].apply(t,arguments)},n[e]=Je}),n}function L(t,e,n){for(;t&&!j(t,e);)t=t!==n&&!A(t)&&t.parentNode;return t}function A(t){return null!=t&&t.nodeType===t.DOCUMENT_NODE}function j(t,e){if(!t||1!==t.nodeType)return!1;var n,i=t.webkitMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var o=t.parentNode,r=!o,a=document.createElement("div");return r&&(o=a).appendChild(t),n=~function(t,e){var n;return A(t)&&He.test(e)?(n=t.getElementById(RegExp.$1))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:Array.prototype.slice.call(Fe.test(e)?t.getElementsByClassName(RegExp.$1):Ke.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))}(o,e).indexOf(t),r&&a.removeChild(t),n}function M(t,e){return t!==e&&t.contains(e)}function B(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}function D(t,e,n,i){return function(t,e,n,i,o,r){var a=O(t),s=un[a]||(un[a]=[]);H(e,n,function(e,n){var a=U(e);a.fn=n,a.sel=i,a.e in dn&&(n=function(t){var e=t.relatedTarget;return!e||e!==this&&!G(this,e)?a.fn.apply(this,arguments):void 0}),a.del=o&&o(n,e);var c=a.del||n;a.proxy=function(e){var n=c.apply(t,[e].concat(e.data));return!1===n&&(e.preventDefault(),e.stopPropagation()),n},a.i=s.length,s.push(a),"addEventListener"in t&&t.addEventListener($(a.e),a.proxy,F(a,r))})}(t,n,i,e,function(n){return function(i){var o,r=K(i.target,e,t);if(r){(o=N(i)).currentTarget=r,o.liveFired=t;for(var a=arguments.length,s=new Array(a>1?a-1:0),c=1;a>c;c++)s[c-1]=arguments[c];return n.apply(r,[o].concat(s))}}})}function Q(t,e,n,i){return function(t,e,n,i,o){var r=O(t);H(e||"",n,function(e,n){(function(t,e,n,i){var o,r=U(e);r.ns&&(a=r.ns,o=new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)"));var a;return(un[O(t)]||[]).filter(function(t){return!(!t||r.e&&t.e!==r.e||r.ns&&!o.test(t.ns)||n&&O(t.fn)!==O(n)||i&&t.sel!==i)})})(t,e,n,i).forEach(function(e){delete un[r][e.i],"removeEventListener"in t&&t.removeEventListener($(e.e),e.proxy,F(e,o))})})}(t,n,i,e)}function O(t){return t._bid||(t._bid=an())}function N(t){var e,n={originalEvent:t};for(e in t)pn.test(e)||void 0===t[e]||(n[e]=t[e]);return on(gn,function(e,i){n[i]=function(){return this[e]=hn,t[i].apply(t,arguments)},n[e]=fn}),n}function U(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function $(t){return dn[t]||t}function F(t,e){return t.del&&("focus"===t.e||"blur"===t.e)||!!e}function H(t,e,n){t.split(/\s/).forEach(function(t){n(t,e)})}function K(t,e,n){for(;t&&!z(t,e);)t=t!==n&&!q(t)&&t.parentNode;return t}function q(t){return null!=t&&t.nodeType===t.DOCUMENT_NODE}function z(t,e){if(!t||1!==t.nodeType)return!1;var n,i=t.webkitMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var o=t.parentNode,r=!o,a=document.createElement("div");return r&&(o=a).appendChild(t),n=~function(t,e){var n;return q(t)&&cn.test(e)?(n=t.getElementById(RegExp.$1))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:Array.prototype.slice.call(sn.test(e)?t.getElementsByClassName(RegExp.$1):ln.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))}(o,e).indexOf(t),r&&a.removeChild(t),n}function G(t,e){return t!==e&&t.contains(e)}function J(t,e){return Rn(t)===e.toLowerCase()}function V(t){return null==t}function Y(t){return void 0===t}function X(t){return!!J(t,"Object")&&(null===Object.getPrototypeOf(t)||Object===t.constructor)}function W(t){return J(t,"Function")}function Z(t){return J(t,"String")}function te(t){return J(t,"Array")}function ee(t){return!0===t||!1===t}function ne(t){return new Promise(function(e,n){P({url:we.ADDREPLY,data:{appid:be.appid,thread_id:be.threadId,parent_id:t.replyId,content:t.text,sync_text:+t.isRadioChecked,ts:Date.now(),client_type:"pc",callback:"?"},success:function(t){var i;
!+t.errno&&t.ret?(Tn.show({text:"发表成功"}),e(function(t){var e=t.sync_text_comment;return e&&(t.sync_text_comment=a(e,c(c({},e.user),{},{thread_id:t.thread_id,is_author:!0,like_count:0}))),t}(t.ret))):(Tn.show({text:(i=t.errno,Ie[i+""]||"发表失败，请稍后重试")}),n())},error:function(t,e){Tn.show({text:Re}),n({e:t,p:e})}})})}function ie(t,e,n){var i,o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=document,s=t.replace(/^(css|img)!/,""),c=!1,l=n.async,d=void 0===l||l,u=n.maxTries,h=void 0===u?1:u,f=n.timeout,p=void 0===f?2e4:f,g=n.before,m=void 0===g?null:g,v=m;"function"!=typeof v&&(v=Pn),/(^css!|\.css$)/.test(t)?(c=!0,(i=a.createElement("link")).rel="stylesheet",i.href=s):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(i=a.createElement("img")).src=s:((i=a.createElement("script")).src=t,i.async=!!d);var b=function(t){var a;if(clearTimeout(o),a=t instanceof Error?"e":t.type[0],c&&"hideFocus"in i)try{i.sheet.cssText.length||(a="e")}catch(s){a="e"}return"e"===a&&(r+=1)<h?ie(s,e,n,r):(i.onload=i.onerror=i.onbeforeload=null,i=null,void e("e"===a?t||"error":null,s))};if(i.onload=i.onerror=b,!1!==v(t,i)){var y=a.head||a.getElementsByTagName("script")[0];y.appendChild(i),p>0&&(o=setTimeout(function(){b(new Error("timeout"))},p))}}function oe(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Z(t))return t;var n=[];for(var i in t){var o=t[i];te(o)?o=JSON.stringify(re(o)):V(o)?o="":X(o)?o=JSON.stringify(o):W(o)&&(o=Zn(o)),n.push("".concat(i,"=").concat(e?ei(o):o))}return n.join("&")}function re(t){return t.map(function(t){switch(Rn(t)){case"string":return t;case"function":return Zn(t);default:return t}})}function ae(t,e){try{return ni(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),i=t.slice(e);return Array.prototype.concat.call([],ae(n),ae(i))}function se(t){try{return ni(t)}catch(e){for(var n=t.match(ii),i=1;i<n.length;i++)n=(t=ae(n,i).join("")).match(ii);return t}}function ce(t,e){for(var n in e)X(e[n])||te(e[n])?(X(e[n])&&!X(t[n])&&(t[n]={}),te(e[n])&&!te(t[n])&&(t[n]=[]),ce(t[n],e[n])):Y(e[n])||(t[n]=e[n])}function le(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];return ee(t)&&(t=n.shift()),n.forEach(function(e){ce(t,e)}),t}function de(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hi;"main"===t&&(t="");var i,o="0";return"object"===("undefined"==typeof window?"undefined":e(window))&&window.baiduboxapp_version?baiduboxapp_version:((di(t,n)||ui(t,n))&&((i=/(baiduboxapp|baiduboxvision)\/([\d.]+)/.exec(n))?o=i[2]:(i=/([\d+.]+)_(?:diordna|enohpi)_/.exec(n))&&(o=(i=i[1].split(".")).reverse().join("."))),o)}function ue(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hi;if((t=t||de(e,n))&&"string"==typeof t){var i=/\d+\.\d+/.exec(t);if(i)return i[0]}return 0}function he(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li;return/(Android);?[\s\/]+([\d.]+)?/.test(t)}function fe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li;return/(iPhone|iPod|iPad)/.test(t)}var pe=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},ge={name:"",version:""},me={opera:/Opera\/([\d.]+)/,firefox:/Firefox\/([\d.]+)/,ie:/MSIE\s([\d.]+)/,ie11:/Trident\/[\d](?=[^\?]+).*rv:([0-9.]+)/,edge:/Edge\/([\d.]+)/,chrome:/Chrome\/([\d.]+)/,safari:/Safari\/([\d.]+)/},ve=navigator.userAgent||"";ge.name=E(ve),ge.version=function(t,e){var n="";switch(e=e||E(t)){case"Opera":case"Firefox":case"Edge":case"Chrome":case"Safari":var i=me[e.toLocaleLowerCase()].exec(t);n=i?i[1]:"";break;case"IE":var o=me.ie.exec(t)||me.ie11.exec(t);n=o?o[1]:""}return n}(ve,ge.name);var be={isDev:!0,isLogin:!1,userInfo:{},appid:"",threadId:"",commentCount:0,winHeight:window.innerHeight||document.documentElement.clientHeight,passStaticPage:"",isHigherBrowser:function(t){var e=ge.name.toLocaleLowerCase();if(t.hasOwnProperty(e)){var n=t[e];return function(t,e){t=C(t,""),e=C(e,"");for(var n=t.split("."),i=e.split("."),o=0,r=Math.max(n.length,i.length);r>o;o++){if(n[o]&&!i[o]&&parseInt(n[o],10)>0||parseInt(n[o],10)>parseInt(i[o],10))return 1;if(i[o]&&!n[o]&&parseInt(i[o],10)>0||parseInt(n[o],10)<parseInt(i[o],10))return-1}return 0}(ge.version,n)>-1}return!0}({ie:"11"})},ye={thread_id:"",reply_id:"",start:0,num:20,appid:"",order:"12",inner_order:"9",use_list:"1",callback:"?"},xe="https://ext.baidu.com",we={LIST1:"".concat(xe,"/api/comment/v2/comment/list"),LIST2:"".concat(xe,"/api/comment/v2/comment/detail"),UPDOWN:"".concat(xe,"/api/comment/v1/comment/updown"),DELETE:"".concat(xe,"/api/comment/v1/comment/delreply"),REPORT:"".concat(xe,"/api/comment/v1/comment/report"),ADDREPLY:"".concat(xe,"/api/comment/v1/comment/addreply")},ke="正在加载...",_e="加载失败，点击重新加载",Ce="查看更多评论",Ee="没有更多啦",Re="网络不给力，请稍后重试",Te="点击太频繁了，休息一下吧",Pe=[{id:"4",text:"反动违法"},{id:"1",text:"色情低俗"},{id:"6",text:"谩骂攻击"},{id:"3",text:"营销广告"},{id:"9",text:"其他"}],Se=function(t){return"".concat("https://author.baidu.com/home","?context=%7B%22uk%22%3A%22").concat(t,"%22%7D")},Ie={202:"参数错误，发送失败",701:"手速太快了，休息一下再试吧",872:"此评论暂无法回复",802:"发送失败，此内容暂不支持评论",880:"发表失败",890:"每天可发表5次图片评论",838:"由于对方设置，你无法进行该操作"},Le=function(t,n,i){return new TypeError("Expected `"+t+"` to be of type `"+n+"`, got `"+e(i)+"`")},Ae=function(){function t(){n(this,t),this._events={}}return o(t,[{key:"on",value:function(t,e,n){if(!k(t))throw Le("name","string",t);if(!w(e))throw Le("callback","function",e);var i=this._events;return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this}},{key:"once",value:function(t,e,n){function i(){o.off(t,i);for(var r=arguments.length,a=new Array(r),s=0;r>s;s++)a[s]=arguments[s];e.apply(n,a)}var o=this;return i._=e,this.on(t,i,n)}},{key:"emit",value:function(t){if(!k(t))throw Le("name","string",t);for(var e=(this._events[t]||[]).slice(),n=arguments.length,i=new Array(n>1?n-1:0),o=1;n>o;o++)i[o-1]=arguments[o];for(var r=0,a=e.length;a>r;r++){var s=e[r],c=s.fn,l=s.ctx,d=void 0===l?null:l;c.apply(d,i)}return this}},{key:"off",value:function(t,e){var n=this._events,i=n[t];if(i&&i.length)if(void 0===e)delete n[t];else if(w(e)){for(var o=[],r=0,a=i.length;a>r;r++){var s=i[r].fn;s!==e&&s._!==e&&o.push(i[r])}o.length?n[t]=o:delete n[t]}return this}}]),t}(),je=function(){return new Ae},Me=0,Be=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return Me++,(Date.now().toString(16)+Me).slice(-1*t)},De="object"===("undefined"==typeof window?"undefined":e(window))?window:global,Qe=function(t){if("function"==typeof t){var e="_xfunc_".concat(Be());return De[e]=function(){for(var e=arguments.length,n=new Array(e),i=0;e>i;i++)n[i]=arguments[i];return t.apply(De,n)},e}return t},Oe=encodeURIComponent,Ne=function(t){return Oe(t).replace(/[!'()*]/g,function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())})},Ue=function(){},$e=function(t,n,i){if("object"===e(t)){var o,r,a=function(t){var e;return e=null==t?String(t):(e=Object.prototype.toString.call(t).toLowerCase()).substring(8,e.length-1)}(t);if(i=i||t,"array"===a||"arguments"===a||"nodelist"===a){for(o=0,r=t.length;r>o;o++)if(!1===n.call(i,t[o],o,t))return}else for(o in t)if(t.hasOwnProperty(o)&&!1===n.call(i,t[o],o,t))return}},Fe=/^\.([\w-]+)$/,He=/^#([\w-]*)$/,Ke=/^[\w-]+$/,qe={mouseenter:"mouseover",mouseleave:"mouseout"},ze={},Ge=function(){return!0},Je=function(){return!1},Ve=/^([A-Z]|layer[XY]$)/,Ye={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};B('.x-avatar{position:relative;display:block;width:48px;height:48px}.x-avatar.is-small{width:39px;height:39px}.x-avatar-placeholder{position:absolute;left:0;top:0;width:100%;height:100%;background:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-bd-logo.png) 50% 50% no-repeat;background-size:50% 50%}.x-avatar-img{position:relative;width:100%;height:100%;background-position:50% 50%;background-repeat:no-repeat;background-size:cover;border-radius:50%}.x-avatar-img:after{content:"";position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;width:300%;height:300%;border:3px solid rgba(0,0,0,.1);border-radius:100%;-webkit-transform:scale(.333333);transform:scale(.333333);-webkit-transform-origin:0 0;transform-origin:0 0}.x-avatar-vip{position:absolute;z-index:1;right:0;bottom:0;width:16.5px;height:16.5px;background-position:50% 50%;background-repeat:no-repeat;background-size:cover}.x-avatar .vip-1{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-1.png)}.x-avatar .vip-2{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-2.png)}.x-avatar .vip-3{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-3.png)}.x-avatar .vip-10{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-10.png)}');var Xe=function(){function t(e){n(this,t),this.container=e.container,this.prefixCls="x-avatar",this.src=e.src,this.vip=e.vip,this.href=e.href,this.isSmall=e.isSmall,this.render()}return o(t,[{key:"render",value:function(){var t=document.createElement(this.href?"a":"div");t.classList.add("x-avatar",this.isSmall?"is-small":"x-avatar"),t.href=this.href;var e='\n            <div class="'.concat("x-avatar",'-placeholder"></div>\n            <div class="').concat("x-avatar",'-img" style="').concat(this.imgStyle(),'"></div>\n            ').concat(+this.vip?'<div class="'.concat("x-avatar","-vip vip-").concat(this.vip,'"></div>'):"","\n        ");t.innerHTML=e,this.container.appendChild(t)}},{key:"imgStyle",value:function(){return"background-image: url(".concat(this.src,")")}},{key:"updateSrc",value:function(t){this.src=t.src,this.container.querySelector(".".concat("x-avatar","-img")).style.backgroundImage="url(".concat(this.src,")")}}]),t}();B(".user-bar{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-family:PingFangSC-Regular}.user-bar-uname{font-family:PingFangSC-Semibold;font-size:13px;color:#222}.user-bar-lz{margin-left:4px;margin-right:-7px;padding:2px 2.67px;-webkit-transform:scale(.75);transform:scale(.75);-webkit-transform-origin:left center;transform-origin:left center;font-size:12px;line-height:1;color:#4e6ef2;border:1px solid rgba(78,110,242,.5);border-radius:3.25px;display:inline-block;font-family:initial;font-weight:400}.user-bar-dc{width:13px;height:13px;margin-left:4px;background-size:cover;background-position:50%;background-repeat:no-repeat}.user-bar-verified{padding-left:4px;font-size:13px;color:#626675;display:inline-block;max-width:200px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}");var We=function(){function t(e){n(this,t),this.uname=e.uname,this.isAuthor=!!+e.isAuthor,this.verified=e.verified,this.decorations=e.decorations||[],this.prefixCls="user-bar"}return o(t,[{key:"makeTpl",value:function(){var t=this.decorations;return'\n            <div class="'.concat("user-bar",'">\n                <h5 class="').concat("user-bar",'-uname">').concat(this.uname).concat(this.isAuthor?'<span class="'.concat("user-bar",'-lz">作者</span>'):"","</h5>\n                ").concat(t.length?t.map(function(t){return t.icon?'<span class="'.concat("user-bar",'-dc" style="background-image:url(').concat(t.icon,')"></span>'):""}).join(""):"","\n                ").concat(this.verified?'<span class="'.concat("user-bar",'-verified">').concat(this.verified,"</span>"):"","\n            </div>\n        ")}},{key:"bindEvent",value:function(){}}]),t}(),Ze="object"===("undefined"==typeof window?"undefined":e(window))&&window.self===window?navigator.userAgent:"",tn="https://mbdp03.bdstatic.com/sdks/emoticon/img/",en=[{id:"1",name:"emoji",package_icon:"package_01.png",emoticons:[{id:"001001",text:"[微笑]",icon:"face_01.png"},{id:"001004",text:"[大笑]",icon:"face_04.png"},{id:"001005",text:"[鼓掌]",icon:"face_05.png"},{id:"001206",text:"[嘻嘻]",icon:"face_206.png"},{id:"001023",text:"[色]",icon:"face_23.png"},{id:"001025",text:"[得意]",icon:"face_25.png"},{id:"001159",text:"[挤眼]",icon:"face_159.png"},{id:"001071",text:"[滑稽]",icon:"face_71.png"},{id:"001197",text:"[困]",icon:"face_197.png"},{id:"001011",text:"[汗]",icon:"face_11.png"},{id:"001073",text:"[左捂脸]",icon:"face_73.png"},{id:"001072",text:"[捂脸]",icon:"face_72.png"},{id:"001007",text:"[笑哭]",icon:"face_07.png"},{id:"001014",text:"[发怒]",icon:"face_14.png"},{id:"001021",text:"[害羞]",icon:"face_21.png"},{id:"001194",text:"[黑线]",icon:"face_194.png"},{id:"001196",text:"[可怜]",icon:"face_196.png"},{id:"001024",text:"[舔屏]",icon:"face_24.png"},{id:"001065",text:"[打call]",icon:"face_65.png"},{id:"001003",text:"[期待]",icon:"face_03.png"},{id:"001098",text:"[亲吻]",icon:"face_98.png"},{id:"001012",text:"[抠鼻]",icon:"face_12.png"},{id:"001219",text:"[ok啊]",icon:"face_219.png"},{id:"001068",text:"[没眼看]",icon:"face_68.png"},{id:"001034",text:"[偷笑]",icon:"face_34.png"},{id:"001013",text:"[哼]",icon:"face_13.png"},{id:"001033",text:"[你懂的]",icon:"face_33.png"},{id:"001215",text:"[欧耶]",icon:"face_215.png"},{id:"001016",text:"[不高兴]",icon:"face_16.png"},{id:"001066",text:"[尬笑]",icon:"face_66.png"},{id:"001239",text:"[泪奔]",icon:"face_239.png"},{id:"001019",text:"[大哭]",icon:"face_19.png"},{id:"001020",text:"[流泪]",icon:"face_20.png"},{id:"001038",text:"[鄙视]",icon:"face_38.png"},{id:"001015",text:"[委屈]",icon:"face_15.png"},{id:"001228",text:"[挠头]",icon:"face_228.png"},{id:"001192",text:"[费解]",icon:"face_192.png"},{id:"001026",text:"[疑问]",icon:"face_26.png"},{id:"001226",text:"[苦思冥想]",icon:"face_226.png"},{id:"001027",text:"[晕]",icon:"face_27.png"},{id:"001051",text:"[爱钱]",icon:"face_51.png"},{id:"001069",text:"[嘿哈]",icon:"face_69.png"},{id:"001029",text:"[二哈]",icon:"face_29.png"},{id:"001028",text:"[大哈]",icon:"face_28.png"},{id:"001030",text:"[三哈]",icon:"face_30.png"},{id:"001217",text:"[惊恐]",icon:"face_217.png"},{id:"001241",text:"[石化]",icon:"face_241.png"},{id:"001041",text:"[衰]",icon:"face_41.png"},{id:"001042",text:"[骷髅]",icon:"face_42.png"},{id:"001018",text:"[惊哭]",icon:"face_18.png"},{id:"001009",text:"[啊]",icon:"face_09.png"},{id:"001166",text:"[生病]",icon:"face_166.png"},{id:"001037",text:"[再见]",icon:"face_37.png"},{id:"001036",text:"[哈欠]",icon:"face_36.png"},{id:"001187",text:"[并不简单]",icon:"face_187.png"},{id:"001218",text:"[社会]",icon:"face_218.png"},{id:"001216",text:"[嫌弃]",icon:"face_216.png"},{id:"001031",text:"[白眼]",icon:"face_31.png"},{id:"001002",text:"[开心]",icon:"face_02.png"},{id:"001067",text:"[坏笑]",icon:"face_67.png"},{id:"001022",text:"[亲亲]",icon:"face_22.png"},{id:"001221",text:"[撇嘴]",icon:"face_221.png"},{id:"001188",text:"[馋嘴]",icon:"face_188.png"},{id:"001203",text:"[思考]",icon:"face_203.png"},{id:"001220",text:"[耶耶耶]",icon:"face_220.png"},{id:"001191",text:"[顶]",icon:"face_191.png"},{id:"001154",text:"[感冒]",icon:"face_154.png"},{id:"001222",text:"[emmm]",icon:"face_222.png"},{id:"001044",text:"[闭嘴]",icon:"face_44.png"},{id:"001231",text:"[摸头]",icon:"face_231.png"},{id:"001209",text:"[右哼哼]",icon:"face_209.png"},{id:"001210",text:"[左哼哼]",icon:"face_210.png"},{id:"001202",text:"[失望]",icon:"face_202.png"},{id:"001017",text:"[囧]",icon:"face_17.png"},{id:"001039",text:"[抓狂]",icon:"face_39.png"},{id:"001040",text:"[咒骂]",icon:"face_40.png"},{id:"001070",text:"[前面的别走]",icon:"face_70.png"},{id:"001050",text:"[友军]",icon:"face_50.png"},{id:"001049",text:"[同上]",icon:"face_49.png"},{id:"001195",text:"[互粉]",icon:"face_195.png"},{id:"001122",text:"[加油啊]",icon:"face_122.png"},{id:"001238",text:"[呕]",icon:"face_238.png"},{id:"001189",text:"[吃瓜]",icon:"face_189.png"},{id:"001227",text:"[奥利给]",icon:"face_227.png"},{id:"001043",text:"[嘘]",icon:"face_43.png"},{id:"001224",text:"[拒绝]",icon:"face_224.png"},{id:"001225",text:"[观望]",icon:"face_225.png"},{id:"001232",text:"[nonono]",icon:"face_232.png"},{id:"001237",text:"[戳脸]",icon:"face_237.png"},{id:"001236",text:"[走你]",icon:"face_236.png"},{id:"001230",text:"[无所谓]",icon:"face_230.png"},{id:"001223",text:"[暗中观察]",icon:"face_223.png"},{id:"001190",text:"[打脸]",icon:"face_190.png"},{id:"001010",text:"[哟]",icon:"face_10.png"},{id:"001233",text:"[握草]",icon:"face_233.png"},{id:"001234",text:"[苦笑]",icon:"face_234.png"},{id:"001032",text:"[阴险]",icon:"face_32.png"},{id:"001045",text:"[呆]",icon:"face_45.png"},{id:"001168",text:"[太开心]",icon:"face_168.png"},{id:"001186",text:"[悲伤]",icon:"face_186.png"},{id:"001148",text:"[爱你]",icon:"face_148.png"},{id:"001006",text:"[悠闲]",icon:"face_06.png"},{id:"001046",text:"[什么鬼]",icon:"face_46.png"},{id:"001235",text:"[饮酒醉]",icon:"face_235.png"},{id:"001047",text:"[吐]",icon:"face_47.png"},{id:"001240",text:"[额]",icon:"face_240.png"},{id:"001229",text:"[凝视]",icon:"face_229.png"},{id:"001008",text:"[不要啊]",icon:"face_08.png"},{id:"001175",text:"[武汉加油]",icon:"face_175.png"},{id:"001048",text:"[已阅]",icon:"face_48.png"},{id:"001162",text:"[男孩儿]",icon:"face_162.png"},{id:"001163",text:"[女孩儿]",icon:"face_163.png"},{id:"001185",text:"[抱抱]",icon:"face_185.png"},{id:"001193",text:"[跪了]",icon:"face_193.png"},{id:"001204",text:"[摊手]",icon:"face_204.png"},{id:"001167",text:"[酸]",icon:"face_167.png"},{id:"001074",text:"[666]",icon:"face_74.png"},{id:"001123",text:"[勤洗手]",icon:"face_123.png"},{id:"001125",text:"[n95口罩]",icon:"face_125.png"},{id:"001207",text:"[心]",icon:"face_207.png"},{id:"001124",text:"[中国]",icon:"face_124.png"},{id:"001062",text:"[蜡烛]",icon:"face_62.png"},{id:"001055",text:"[鲜花]",icon:"face_55.png"},{id:"001156",text:"[给力]",icon:"face_156.png"},{id:"001160",text:"[礼物]",icon:"face_160.png"},{id:"001057",text:"[庆祝]",icon:"face_57.png"},{id:"001176",text:"[喜]",icon:"face_176.png"},{id:"001150",text:"[旅行]",icon:"face_150.png"},{id:"001173",text:"[围脖]",icon:"face_173.png"},{id:"001165",text:"[伤心]",icon:"face_165.png"},{id:"001060",text:"[赞同]",icon:"face_60.png"},{id:"001097",text:"[祈福]",icon:"face_97.png"},{id:"001095",text:"[双手鼓掌]",icon:"face_95.png"},{id:"001211",text:"[作揖]",icon:"face_211.png"},{id:"001200",text:"[拳头]",icon:"face_200.png"},{id:"001212",text:"[haha]",icon:"face_212.png"},{id:"001208",text:"[耶]",icon:"face_208.png"},{id:"001205",text:"[握手]",icon:"face_205.png"},{id:"001214",text:"[ok]",icon:"face_214.png"},{id:"001198",text:"[来]",icon:"face_198.png"},{id:"001201",text:"[弱]",icon:"face_201.png"},{id:"001101",text:"[加油]",icon:"face_101.png"},{id:"001213",text:"[NO]",icon:"face_213.png"},{id:"001184",text:"[good]",icon:"face_184.png"},{id:"001105",text:"[小黄鸭]",icon:"face_105.png"},{id:"001102",text:"[泡泡枪]",icon:"face_102.png"},{id:"001104",text:"[棒棒糖]",icon:"face_104.png"},{id:"001114",text:"[小老鼠]",icon:"face_114.png"},{id:"001199",text:"[喵喵]",icon:"face_199.png"},{id:"001183",text:"[猪头]",icon:"face_183.png",hideInEmojiKeyboard:!0},{id:"001053",text:"[国宝]",icon:"face_53.png"},{id:"001054",text:"[羊驼]",icon:"face_54.png"},{id:"001170",text:"[兔子]",icon:"face_170.png"},{id:"001174",text:"[围观]",icon:"face_174.png"},{id:"001118",text:"[钱袋]",icon:"face_118.png"},{id:"001079",text:"[财神]",icon:"face_79.png"},{id:"001117",text:"[灯笼]",icon:"face_117.png"},{id:"001151",text:"[点亮平安灯]",icon:"face_151.png"},{id:"001115",text:"[2020]",icon:"face_115.png",hideInEmojiKeyboard:!0},{id:"001120",text:"[舞狮]",icon:"face_120.png"},{id:"001078",text:"[鞭炮]",icon:"face_78.png"},{id:"001058",text:"[生日蛋糕]",icon:"face_58.png"},{id:"001149",text:"[奥特曼]",icon:"face_149.png"},{id:"001061",text:"[药丸]",icon:"face_61.png"},{id:"001063",text:"[鸡蛋]",icon:"face_63.png"},{id:"001155",text:"[干杯]",icon:"face_155.png"},{id:"001180",text:"[炸鸡腿]",icon:"face_180.png"},{id:"001152",text:"[肥皂]",icon:"face_152.png"},{id:"001171",text:"[威武]",icon:"face_171.png"},{id:"001157",text:"[给你小心心]",icon:"face_157.png"},{id:"001178",text:"[音乐]",icon:"face_178.png"},{id:"001082",text:"[火车]",icon:"face_82.png"},{id:"001083",text:"[飞机]",icon:"face_83.png"},{id:"001158",text:"[话筒]",icon:"face_158.png"},{id:"001182",text:"[钟]",icon:"face_182.png"},{id:"001181",text:"[照相机]",icon:"face_181.png"},{id:"001161",text:"[绿丝带]",icon:"face_161.png"},{id:"001172",text:"[微风]",icon:"face_172.png"},{id:"001169",text:"[太阳]",icon:"face_169.png"},{id:"001126",text:"[月亮]",icon:"face_126.png"},{id:"001153",text:"[浮云]",icon:"face_153.png"},{id:"001177",text:"[下雨]",icon:"face_177.png"},{id:"001164",text:"[沙尘暴]",icon:"face_164.png"},{id:"001179",text:"[赞啊]",icon:"face_179.png"},{id:"001248",text:"[2021]",icon:"face_248.png"},{id:"001247",text:"[雪花]",icon:"face_247.png"},{id:"001242",text:"[工人]",icon:"face_242.png",hideInEmojiKeyboard:!0},{id:"001243",text:"[农民]",icon:"face_243.png",hideInEmojiKeyboard:!0},{id:"001244",text:"[稻草人]",icon:"face_244.png",hideInEmojiKeyboard:!0},{id:"001245",text:"[锦旗]",icon:"face_245.png",hideInEmojiKeyboard:!0},{id:"001246",text:"[大红花]",icon:"face_246.png",hideInEmojiKeyboard:!0},{id:"001127",text:"[→_→]",icon:"face_127.png",hideInEmojiKeyboard:!0},{id:"001035",text:"[睡觉]",icon:"face_35.png",hideInEmojiKeyboard:!0},{id:"001056",text:"[中国加油]",icon:"face_56.png",hideInEmojiKeyboard:!0},{id:"001059",text:"[MicDrop]",icon:"face_59.png",hideInEmojiKeyboard:!0},{id:"001064",text:"[浪]",icon:"face_64.png",hideInEmojiKeyboard:!0},{id:"001075",text:"[2018]",icon:"face_75.png",hideInEmojiKeyboard:!0},{id:"001076",text:"[福]",icon:"face_76.png",hideInEmojiKeyboard:!0},{id:"001077",text:"[红包]",icon:"face_77.png",hideInEmojiKeyboard:!0},{id:"001080",text:"[饺子]",icon:"face_80.png",hideInEmojiKeyboard:!0},{id:"001081",text:"[车票]",icon:"face_81.png",hideInEmojiKeyboard:!0},{id:"001084",text:"[射门]",icon:"face_84.png",hideInEmojiKeyboard:!0},{id:"001085",text:"[红牌]",icon:"face_85.png",hideInEmojiKeyboard:!0},{id:"001086",text:"[黄牌]",icon:"face_86.png",hideInEmojiKeyboard:!0},{id:"001087",text:"[哨子]",icon:"face_87.png",hideInEmojiKeyboard:!0},{id:"001088",text:"[比分]",icon:"face_88.png",hideInEmojiKeyboard:!0},{id:"001089",text:"[啤酒]",icon:"face_89.png",hideInEmojiKeyboard:!0},{id:"001090",text:"[足球]",icon:"face_90.png",hideInEmojiKeyboard:!0},{id:"001091",text:"[大力神杯]",icon:"face_91.png",hideInEmojiKeyboard:!0},{id:"001092",text:"[锦鲤]",icon:"face_92.png",hideInEmojiKeyboard:!0},{id:"001096",text:"[火焰]",icon:"face_96.png",hideInEmojiKeyboard:!0},{id:"001099",text:"[天使]",icon:"face_99.png",hideInEmojiKeyboard:!0},{id:"001100",text:"[樱花]",icon:"face_100.png",hideInEmojiKeyboard:!0},{id:"001103",text:"[气球]",icon:"face_103.png",hideInEmojiKeyboard:!0},{id:"001106",text:"[粽子]",icon:"face_106.png",hideInEmojiKeyboard:!0},{id:"001107",text:"[70周年]",icon:"face_107.png",hideInEmojiKeyboard:!0},{id:"001108",text:"[国庆]",icon:"face_108.png",hideInEmojiKeyboard:!0},{id:"001109",text:"[国庆快乐]",icon:"face_109.png",hideInEmojiKeyboard:!0},{id:"001110",text:"[圣诞老人]",icon:"face_110.png",hideInEmojiKeyboard:!0},{id:"001111",text:"[圣诞树]",icon:"face_111.png",hideInEmojiKeyboard:!0},{id:"001112",text:"[圣诞袜]",icon:"face_112.png",hideInEmojiKeyboard:!0},{id:"001113",text:"[铃铛]",icon:"face_113.png",hideInEmojiKeyboard:!0},{id:"001119",text:"[鼠年大吉]",icon:"face_119.png",hideInEmojiKeyboard:!0},{id:"001121",text:"[戴口罩]",icon:"face_121.png",hideInEmojiKeyboard:!0},{id:"001128",text:"[⚡]",icon:"face_128.png",hideInEmojiKeyboard:!0},{id:"001129",text:"[🍉]",icon:"face_129.png",hideInEmojiKeyboard:!0},{id:"001130",text:"[🍗]",icon:"face_130.png",hideInEmojiKeyboard:!0},{id:"001131",text:"[🎄]",icon:"face_131.png",hideInEmojiKeyboard:!0},{id:"001132",text:"[👏]",icon:"face_132.png",hideInEmojiKeyboard:!0},{id:"001133",text:"[👻]",icon:"face_133.png",hideInEmojiKeyboard:!0},{id:"001134",text:"[💊]",icon:"face_134.png",hideInEmojiKeyboard:!0},{id:"001135",text:"[💣]",icon:"face_135.png",hideInEmojiKeyboard:!0},{id:"001136",text:"[💩]",icon:"face_136.png",hideInEmojiKeyboard:!0},{id:"001137",text:"[🤓]",icon:"face_137.png",hideInEmojiKeyboard:!0},{id:"001138",text:"[🤗]",icon:"face_138.png",hideInEmojiKeyboard:!0},{id:"001139",text:"[👿]",icon:"face_139.png",hideInEmojiKeyboard:!0},{id:"001140",text:"[😱]",icon:"face_140.png",hideInEmojiKeyboard:!0},{id:"001141",text:"[🙃]",icon:"face_141.png",hideInEmojiKeyboard:!0},{id:"001142",text:"[🙅]",icon:"face_142.png",hideInEmojiKeyboard:!0},{id:"001143",text:"[🙈]",icon:"face_143.png",hideInEmojiKeyboard:!0},{id:"001144",text:"[🙉]",icon:"face_144.png",hideInEmojiKeyboard:!0},{id:"001145",text:"[🙊]",icon:"face_145.png",hideInEmojiKeyboard:!0},{id:"001146",text:"[🙋]",icon:"face_146.png",hideInEmojiKeyboard:!0},{id:"001147",text:"[🙏]",icon:"face_147.png",hideInEmojiKeyboard:!0}]}],nn=p(en,1)[0].emoticons,on=(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;/(iPhone|iPod|iPad)/.test(t)}(),function(t,n,i){if("object"===e(t)){var o,r,a=function(t){var e;return e=null==t?String(t):(e=Object.prototype.toString.call(t).toLowerCase()).substring(8,e.length-1)}(t);if(i=i||t,"array"===a||"arguments"===a||"nodelist"===a){for(o=0,r=t.length;r>o;o++)if(!1===n.call(i,t[o],o,t))return}else for(o in t)if(t.hasOwnProperty(o)&&!1===n.call(i,t[o],o,t))return}}),rn=0,an=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return rn++,(Date.now().toString(16)+rn).slice(-1*t)},sn=/^\.([\w-]+)$/,cn=/^#([\w-]*)$/,ln=/^[\w-]+$/,dn={mouseenter:"mouseover",mouseleave:"mouseout"},un={},hn=function(){return!0},fn=function(){return!1},pn=/^([A-Z]|layer[XY]$)/,gn={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};B(".x-interact-img-view{position:fixed;top:0;right:0;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;z-index:100;background:rgba(25,18,25,.9);cursor:-webkit-zoom-out;cursor:zoom-out}");var mn="x-interact-img-view",vn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.list=e.list,this.containerId=e.containerId?"#"+e.containerId:"",this.container=this.containerId&&document.querySelector(this.containerId)||document.body,this.winHeight=window.innerHeight||document.documentElement.clientHeight,this.winWidth=window.innerWidth||document.documentElement.clientWidth}return o(t,[{key:"render",value:function(){var t=this.makeTpl(this.list);this.container.insertAdjacentHTML("beforeend",t),this.bindEvent()}},{key:"makeTpl",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e[n]||{},o=i||{},r=o.url,a=o.width,s=o.height;a>s?(a=Math.min(a,this.winWidth)-100,t="width: ".concat(a,"px")):(s=Math.min(s,this.winHeight)-100,t="height: ".concat(s,"px"));var c='\n            <div class="'.concat(mn,'">\n                <img src="').concat(r,'" style="').concat(t,'"/>\n            </div>\n        ');return c}},{key:"destory",value:function(){Q(this.container,".".concat(mn),"click");var t=this.container.querySelector(".".concat(mn));t&&(t.outerHTML="")}},{key:"bindEvent",value:function(){var t=this;D(this.container,".".concat(mn),"click",function(){t.destory()})}}]),t}();B(".rich-text{padding-top:10px;font:14px/22px PingFangSC-Regular;text-align:justify;color:#222}.rich-text>a{text-decoration:none}.rich-text .type-at,.rich-text .type-image,.rich-text .type-link,.rich-text .type-topic,.rich-text .type-video,.rich-text .type-vote{color:#4367b4;cursor:pointer}.rich-text .type-emoji{width:18px;height:18px;margin-top:-4px;background-size:1.2em auto}.rich-text .type-emoji,.rich-text .type-label{display:inline-block;background-repeat:no-repeat;background-position:50% 50%;vertical-align:middle}.rich-text .type-label{width:42px;height:14px;margin-top:-2px;background-size:cover}.rich-text .type-label-1{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-hot-level-1.png)}.rich-text .type-label-2{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-hot-level-2.png)}");var bn={1:"at",3:"link",4:"image"},yn={1:"link",2:"video",3:"vote"},xn=["at","topic","link","video","vote"],wn=function(){function t(e){n(this,t),this.content=e.content,this.contentRich=e.contentRich,this.replyToComment=e.replyToComment,this.hotLevel=e.hotLevel,this.replyId=e.replyId}return o(t,[{key:"makeTpl",value:function(){var t=this.formatRichText();return t.length?'\n            <div class="'.concat("rich-text",'" data-reply-id="').concat(this.replyId,'">\n                ').concat(t.map(function(t){return xn.indexOf(t.type)>-1?'\n                            <a\n                                class="'.concat(t.class,'"\n                                href="').concat(t.url,'"\n                                ').concat(t.style?"style=".concat(t.style):"","\n                            >").concat(t.text,"</a>\n                        "):'\n                        <span\n                            class="'.concat(t.class,'"\n                            ').concat(t.style?"style=".concat(t.style):"","\n                            ").concat("image"===t.type?"data-url=".concat(t.url," data-width=").concat(t.width," data-height=").concat(t.height):"","\n                        >").concat(t.text,"</span>\n                    ")}).join(""),"\n            </div>\n        "):""}},{key:"bindEvent",value:function(t){var e=this.root=t.querySelector(".".concat("rich-text",'[data-reply-id="').concat(this.replyId,'"]'));this.root&&S(e,".type-image","click",function(t){var e=t.target.dataset;!function(t){var e=new vn(t);e.render()}({list:[{width:e.width,height:e.height,url:e.url}]})})}},{key:"formatRichText",value:function(){var t=this,e=this.sliceByRich(this.content,this.contentRich,!0);if(this.replyToComment&&this.replyToComment.length){var n=[];this.replyToComment.map(function(e){n=n.concat([{type:"text",text:" // ","class":"type-text"},{type:"at",text:"@".concat(e.user.uname),"class":"type-at",uk:e.user.uk,url:Se(e.user.uk)},{type:"text",text:"：","class":"type-text"}],t.sliceByRich(e.content,e.content_rich,!1,e.image_list))}),e=e.concat(n)}return+this.hotLevel&&e.unshift({type:"label",text:"","class":"type-label type-label-".concat(this.hotLevel)}),e}},{key:"sliceByRich",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,r=[],a=0,s=o&&o.large||{};if(e&&e.length){var c=null;e.forEach(function(e){if(4==+e.type)c={type:"image",text:e.attr.text,"class":"type-image",url:s.url||e.attr.url,width:s.width,height:s.height};else{a<e.start&&(r=r.concat(n.sliceByEmoji(t.slice(a,+e.start))),a=+e.start);var i=bn[+e.type]||"text";"link"===i&&(i=yn[+e.attr.icon]||"link");var o=t.slice(+e.start,+e.start+ +e.length);r.push({type:i,text:o,"class":"type-".concat(i),uk:e.attr.uk||"",url:("at"===i?Se(e.attr.uk):e.attr.link)||""}),a+=+e.length}}),a<t.length&&(r=r.concat(this.sliceByEmoji(t.slice(a)))),!i&&c&&r.push(c)}else r=g(this.sliceByEmoji(t));return r}},{key:"sliceByEmoji",value:function(t){if(!t)return[];var e=/(\[.*?\])/;return t.split(e).filter(function(t){return t.length}).map(function(t){var n="text",i="type-text",o="",r=function(t){for(var e,n="",i=0;i<nn.length;i++)if((e=nn[i]).text===t){n=e.icon;break}return n}(t);return e.test(t)&&r&&(n="emoji",i="type-emoji",o="background-image:url(".concat("https://mbdp03.bdstatic.com/sdks/emoticon/img/").concat(r,"?t=").concat(Math.floor(Date.now()/1e3/60/60),")"),t=""),{type:n,text:t,style:o,"class":i}})}}]),t}();B(".image-scale{position:relative;width:176px;height:176px;margin-top:16px;border:1px solid rgba(0,0,0,.05);border-radius:12px;overflow:hidden}.image-scale-placeholder{position:absolute;left:0;top:0;width:100%;height:100%;background:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-bd-logo.png) 50% 50% no-repeat;background-size:50% 50%}.image-scale-thumb{position:absolute;display:block;width:100%;height:100%;background-position:50% 50%;background-repeat:no-repeat;background-size:cover;cursor:-webkit-zoom-in;cursor:zoom-in}.image-scale-thumb .tag{position:absolute;right:14px;bottom:14px;font:14px/1 PingFangSC-Medium;text-shadow:0 0 5px rgba(0,0,0,.3);color:#fff}.image-scale-large{position:relative;display:none;width:100%;height:auto;cursor:-webkit-zoom-out;cursor:zoom-out}");
var kn=["","GIF","长图"],_n="176px",Cn="176px",En=function(){function t(e){n(this,t),this.thumb=e.thumb,this.large=e.large,this.type=e.type,this.replyId=e.replyId,this.isLarge=!1}return o(t,[{key:"makeTpl",value:function(){return'\n            <div class="'.concat("image-scale",'" data-reply-id="').concat(this.replyId,'">\n                <div class="').concat("image-scale",'-placeholder"></div>\n                <div class="').concat("image-scale",'-thumb" style="background-image: url(').concat(this.thumb,')">\n                    ').concat(+this.type?'<span class="tag">'.concat(kn[+this.type],"<span>"):"",'\n                </div>\n                <img class="').concat("image-scale",'-large" src="').concat(this.large||this.thumb,'"/>\n            </div>\n        ')}},{key:"bindEvent",value:function(t){var e=this,n=t.querySelector('.image-scale[data-reply-id="'.concat(this.replyId,'"]')),i=(n.querySelector(".image-scale-thumb"),n.querySelector(".image-scale-large"));S(n,".".concat("image-scale","-thumb"),"click",function(){n.style.width="100%",n.style.height="auto",i.style.display="block",e.isLarge=!0}),S(n,".".concat("image-scale","-large"),"click",function(){n.style.width=_n,n.style.height=Cn,i.style.display="none",e.isLarge=!1})}}]),t}(),Rn=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()};B(".x-toast{position:fixed;left:50%;bottom:20%;-webkit-transform:translateX(-50%);transform:translateX(-50%);padding:10px;font-size:18px;color:#fff;background:rgba(0,0,0,.8);border:1px solid hsla(0,0%,100%,.5);border-radius:12px}");var Tn=function(){function t(){n(this,t)}return o(t,null,[{key:"show",value:function(t){var e=this;this.timer&&this.hide(),this.text=t.text,this.duration=t.duration||3e3,this.afterHide=t.afterHide,this.render(),this.timer=setTimeout(function(){e.hide()},this.duration)}},{key:"hide",value:function(){this.el&&(this.clear(),this.changeStyle("display","none"),W(this.afterHide)&&this.afterHide())}},{key:"render",value:function(){if(this.el)this.el.innerText=this.text,this.changeStyle("display","block");else{var t=document.createElement("div");t.classList.add("x-toast"),t.innerText=this.text,this.el=t,document.body.appendChild(t)}}},{key:"clear",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"changeStyle",value:function(t,e){this.el.style[t]=e}}]),t}(),Pn=function(){},Sn=location.protocol+"//passport.baidu.com/passApi/js/uni_login_wrapper.js?cdnversion=",In=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.__instance;if(!e&&n&&n.show)n.show();else{var i=t.apiOpt,o=void 0===i?{}:i,r=t.successCb;delete t.apiOpt,window.__instance=n=window.passport.pop.init(c({loginVersion:"v4",apiOpt:c({loginType:1,u:window.location.href,product:"interact",staticPage:window.location.origin+"/v3Jump.html"},o),cache:!1,tangram:!0,authsite:["tqq","renren","tsina"],onLoginSuccess:function(t){r&&r(t),t.returnValue=!1,window.__instance.hide()},onSubmitStart:function(){},onSubmitedErr:function(){},onSystemErr:function(){},onShow:function(){},onRealHide:function(){},onHide:function(){},onDestroy:function(){}},t)),n.show()}},Ln={},An=function(){return new Promise(function(t){be.isLogin?t():(Ln.loginSuccessCb=function(e){var n=((e||{}).rsp||{}).data||{};be.isLogin=!0,be.curUserName=n.userName,t()},function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.passport&&window.passport.pop;n?In(t,e):ie(Sn+(new Date).getTime(),function(){In(t,e)},{})}({apiOpt:{staticPage:be.passStaticPage},successCb:function(t){Ln.loginSuccessCb(t)}},!1))})},jn=function(t,n,i){return new TypeError("Expected `"+t+"` to be of type `"+n+"`, got `"+e(i)+"`")},Mn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";if(!J(t,"date"))throw jn("d","Date",t);var n=t.getFullYear().toString(),i={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};return e=e.replace(/(y+)/gi,function(t,e){return n.substr(4-Math.min(4,e.length))}),Object.keys(i).forEach(function(t){e=e.replace(new RegExp("("+t+"+)","g"),function(e,n){return i[t]<10&&n.length>1?"0"+i[t]:i[t]})}),e};B(".x-dialog-classic{width:224px;height:131px;background:#fff;border-radius:16px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1)}.x-dialog-classic-msg{padding-top:30px;font-size:18px;line-height:1;text-align:center;color:#222}.x-dialog-classic-oper{padding:21px 20px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.x-dialog-classic .btn{width:80px;height:32px;font-size:14px;border-radius:16px;border:none;outline:none}.x-dialog-classic-cancel{color:#1f1f1f;background:#f5f5f6}.x-dialog-classic-confirm{color:#fff;background:#4e6ef2}");var Bn="x-dialog-classic",Dn=function(){function t(e){n(this,t),this.container=e.container,this.message=e.message||"确认做此操作吗",this.cancelText=e.cancelText||"取消",this.confirmText=e.confirmText||"确认",this.onCancel=e.onCancel,this.onConfirm=e.onConfirm,this.onClose=e.onClose,this.render(),this.bindEvent()}return o(t,[{key:"render",value:function(){var t='\n            <div class="'.concat(Bn,'">\n                <h3 class="').concat(Bn,'-msg">').concat(this.message,'</h3>\n                <div class="').concat(Bn,'-oper">\n                    <button class="btn ').concat(Bn,'-cancel">').concat(this.cancelText,'</button>\n                    <button class="btn ').concat(Bn,'-confirm">').concat(this.confirmText,"</button>\n                </div>\n            </div>\n        ");this.container.innerHTML=t}},{key:"bindEvent",value:function(){var t=this;D(this.container,".".concat(Bn,"-cancel"),"click",function(e){W(t.onCancel)&&t.onCancel(e),t.close()}),D(this.container,".".concat(Bn,"-confirm"),"click",function(e){W(t.onConfirm)&&t.onConfirm(e),t.close()}),this.onOtherClickBind=this.onOtherClick.bind(this),setTimeout(function(){D(document,"html","click",t.onOtherClickBind)},0)}},{key:"close",value:function(){Q(this.container,".".concat(Bn,"-cancel"),"click"),Q(this.container,".".concat(Bn,"-confirm"),"click"),Q(document,"html","click",this.onOtherClickBind),this.container.innerHTML="",W(this.onClose)&&this.onClose()}},{key:"onOtherClick",value:function(t){this.container.innerHTML&&!t.target.closest(".".concat(Bn))&&this.close()}}]),t}();B(".x-dialog-menu{padding:30px 24px;width:368px;background:#fff;border-radius:16px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1);-webkit-box-sizing:border-box;box-sizing:border-box}.x-dialog-menu-title{font-size:18px;line-height:1;text-align:center;color:#222}.x-dialog-menu-list{margin-top:8px;font-size:0}.x-dialog-menu-item{width:176px;height:32px;margin-top:12px;font-size:14px;border-radius:16px;border:none;outline:none;color:#333;background-color:#f5f5f5}.x-dialog-menu-item:nth-child(2n){margin-left:16px}.x-dialog-menu.is-odd .x-dialog-menu-item:last-child{width:368px}.x-dialog-menu-item:hover{color:#fff;background-color:#4e6ef2}");var Qn="x-dialog-menu",On=function(){function t(e){n(this,t),this.title=e.title,this.list=e.list,this.container=e.container,this.clickCallback=e.clickCallback,this.closeCallback=e.closeCallback,this.container}return o(t,[{key:"render",value:function(){var t=this.makeTpl(this.title,this.list);this.container.insertAdjacentHTML("beforeend",t),this.bindEvent()}},{key:"makeTpl",value:function(t,e){var n=(e&&e.length||0)%2==1?"is-odd":"";return'\n            <div class="'.concat(Qn," ").concat(n,'">\n                <h3 class="').concat(Qn,'-title">').concat(t,'</h3>\n                <div class="').concat(Qn,'-list">\n                ').concat(e.map(function(t,e){return'\n                        <button class="'.concat(Qn,'-item" data-id="').concat(e,'">').concat(t.text,"</button>\n                    ")}).join(""),"\n                </div>\n            </div>\n        ")}},{key:"bindEvent",value:function(){var t=this;D(this.container,".".concat(Qn),"click",function(e){e.preventDefault(),e.stopPropagation();var n=e.target;if(n.className==="".concat(Qn,"-item")){t.close();var i=n.dataset.id,o=t.list[i];o&&W(t.clickCallback)&&t.clickCallback({item:o})}}),this.outerClkFunc=this.outerClick.bind(this),setTimeout(function(){D(document,"html","click",t.outerClkFunc)},0)}},{key:"close",value:function(){Q(this.container,".".concat(Qn),"click"),Q(document,"html","click",this.outerClkFunc);var t=this.container.querySelector(".".concat(Qn));t&&(t.outerHTML=""),W(this.closeCallback)&&this.closeCallback()}},{key:"outerClick",value:function(t){!t.target.closest(".".concat(Qn))&&this.close()}}]),t}();B(".x-interact-emoj-panel{height:100%;overflow-y:auto}.x-interact-emoj-panel-wrapper{-webkit-box-sizing:border-box;box-sizing:border-box;width:443px;height:230px;line-height:0;padding:20px 6px 20px 20px;font-size:0;border-radius:12px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1)}.x-interact-emoj-panel::-webkit-scrollbar{width:3px}.x-interact-emoj-panel::-webkit-scrollbar-thumb{border-radius:10px;background-color:#f2f2f2}.x-interact-emoj-panel .img-wrap{display:inline-block;margin:5px;padding:5px}.x-interact-emoj-panel .img-wrap:hover{background-color:rgba(51,136,255,.2)}.x-interact-emoj-panel .emoj-img{width:30px}");var Nn="x-interact-emoj-panel",Un=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.options=c({containerId:Nn,clickCallback:function(){}},e),this.containerId="#"+this.options.containerId,this.container=document.querySelector(this.containerId),this.container}return o(t,[{key:"render",value:function(){this.container.classList.add("".concat(Nn,"-wrapper")),this.container.innerHTML=this.makeTpl(),this.bindEvent(this.options.clickCallback)}},{key:"makeTpl",value:function(){var t=p(en,1)[0],e=tn,n=t.emoticons||[],i=Mn(new Date,"yyyyMMddhh");return'\n            <div class="'.concat(Nn,'">\n                ').concat(n.map(function(t){var n=t.text,o=t.icon,r=t.id;return t.hideInEmojiKeyboard?"":'\n                        <span class="img-wrap" data-text="'.concat(n,'" data-id="').concat(r,'">\n                            <img class="emoj-img" src="').concat(e).concat(o,"?r=").concat(i,'" title="').concat(n,'"/>\n                        </span>\n                    ')}).join(""),"\n            </div>\n        ")}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"show",value:function(){this.container.style.display="block"}},{key:"toggle",value:function(){"none"===this.container.style.display?this.show():this.hide()}},{key:"bindEvent",value:function(t){var e=this;D(this.container,this.containerId,"click",function(n){n.preventDefault(),n.stopPropagation();var i=n.target;if("#".concat(i.id)===e.containerId)e.hide();else{"emoj-img"===i.className&&(i=i.parentElement);var o=i.dataset,r=o.text,a=o.id;r&&W(t)&&t({text:r,id:a})}}),D(document,"html","click",function(){e.hide()})}}]),t}(),$n=function(t){var e=new Un(t);return e.render(),e},Fn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;n=n||window.innerHeight||document.documentElement.clientHeight;var i=document.documentElement.scrollTop||window.pageYOffset;return!(n+i-t.offsetTop<=e||t.offsetTop+t.clientHeight<i)};B('.x-interact-publish{width:536px;font-size:13px;color:#222}.x-interact-publish.full-width{width:100%}.x-interact-publish-cont{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:94px;width:100%;background:#f5f5f6;border-radius:12px}.x-interact-publish .text-area{padding:16px 16px 23px;width:100%;resize:none;background:#f5f5f6;border-radius:12px;border:none;color:#1f1f1f}.x-interact-publish .text-area:empty:before{content:attr(placeholder)}.x-interact-publish .text-area:focus{outline:none}.x-interact-publish-opt{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:30px;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-top:12px}.x-interact-publish .emoj{display:inline-block;height:18px;width:18px;margin-left:5px;background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-emoj-btn.png);background-size:contain;background-repeat:no-repeat}.x-interact-publish .emoj:hover{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-emoj-btn-active.png)}.x-interact-publish .radio{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.x-interact-publish .radio:not(:first-child){margin-left:30px}.x-interact-publish .radio:before{content:"";display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;height:26px;width:26px;border:2px solid #222;border-radius:100%;-webkit-transform-origin:left;transform-origin:left;-webkit-transform:scale(.5);transform:scale(.5);margin-right:-9px}.x-interact-publish .radio.checked:before{border:none;background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-radio-selected.png);background-size:contain;background-repeat:no-repeat;background-color:#4e6ef2}.x-interact-publish .no-radio .radio{display:none}.x-interact-publish .extra{position:absolute;right:90px;color:#9195a3}.x-interact-publish .extra.exceed{color:#f73131}.x-interact-publish .send{position:absolute;right:0;width:80px;height:30px;line-height:30px;font-size:14px;text-align:center;color:#fff;background:#4e6ef2;border-radius:15px;cursor:pointer}.x-interact-publish .send.disabled{opacity:.2;cursor:not-allowed}');var Hn="x-interact-publish",Kn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.options=c({containerId:Hn,placeholder:"发表神评妙论",radio:{label:"同时评论原文",checked:!1},maxTextNum:300,showNumLimit:20,isEmojShow:!0,fullWidth:!1},e);var i=e.actionCallback,o=e.sendCallback;this.sendCallback=W(o)?o:function(){},this.actionCallback=W(i)?i:function(){},this.containerId="#"+this.options.containerId,this.container=document.querySelector(this.containerId),this.container&&(this.emojPanel="",this.options.emojPanelId=this.options.isEmojShow?this.options.containerId+"_emoj_panel":"")}return o(t,[{key:"render",value:function(){this.container.innerHTML=this.makeTpl(c({},this.options)),this.setMainDom(),this.bindEvent(),this.checkRealShow()}},{key:"setMainDom",value:function(){this.textarea=this.container.querySelector(".text-area"),this.operatorBar=this.container.querySelector(".".concat(Hn,"-opt")),this.radio=this.container.querySelector(".radio"),this.radio.checked=!!this.options.radio.checked,this.extra=this.container.querySelector(".extra"),this.send=this.container.querySelector(".send")}},{key:"makeTpl",value:function(t){var e=t.placeholder,n=t.radio,i=void 0===n?{}:n,o=t.emojPanelId,r=t.fullWidth;return'\n            <div class="'.concat(Hn," ").concat(r?"full-width":"",'">\n                <div class="').concat(Hn,'-cont">\n                    <!-- <div class="text-area ').concat(e?"placeholder":"",'"\n                        contenteditable="true"\n                        placeholder="').concat(e,'"></div> -->\n                    <textarea class="text-area ').concat(e?"placeholder":"",'"\n                        placeholder="').concat(e,'"></textarea>\n                    <div class="other"></div>\n                </div>\n                <div class="').concat(Hn,"-opt ").concat(i.label?"":"no-radio",'">\n                ').concat(o?'\n                    <span class="emoj"></span>':"",'\n                    <span class="radio ').concat(i.checked?"checked":"",'">').concat(i.label,'</span>\n                    <span class="extra"></span>\n                    <span class="send disabled">发表</span>\n                </div>\n                <div class="').concat(Hn,'-panel">\n                    <div id="').concat(o,'"></div>\n                </div>\n            </div>\n        ')}},{key:"bindEvent",value:function(){var t=this;D(this.container,this.containerId,"click",function(e){e.preventDefault(),e.stopPropagation();var n=e.target.className;-1!==n.indexOf("radio")&&(n="radio");var i=t.actionCallback;switch(n){case"emoj":t.emojClk(t.options),i("publish-emoj-click");break;case"radio":t.emojPanelHide(),t.radioClk(),i("publish-radio-click",{checked:t.radio.checked});break;case"send":t.emojPanelHide(),t.sendClk(),i("publish-send-click");break;case"text-area":t.emojPanelHide(),i("publish-textarea-click");break;default:t.emojPanelHide()}}),D(this.container,".text-area","keyup",function(){t.setExtra(t.options)})}},{key:"setTextarea",value:function(t,e){e=e||this.textarea.selectionStart;var n=this.textarea.value;n=n.slice(0,e)+t+n.slice(e),this.textarea.value=n,this.textarea.setSelectionRange(e+t.length,n.length)}},{key:"clearTextarea",value:function(){this.textarea.value="",this.sendEnable(!1)}},{key:"getTextarea",value:function(){return this.textarea.value}},{key:"setExtra",value:function(t){var e=t.maxTextNum,n=t.showNumLimit,i=e-this.textarea.value.length;0>i?(this.extra.classList.add("exceed"),this.sendEnable(!1)):(this.extra.classList.remove("exceed"),this.sendEnable(!0),i>n&&(i="")),this.extra.innerHTML=i}},{key:"emojClk",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.emojPanel;n?n.toggle():this.emojPanel=$n({containerId:e.emojPanelId,clickCallback:function(n){t.setTextarea(n.text),t.setExtra(e),t.actionCallback("publish-emojItem-click",{id:n.id})}})}},{key:"emojPanelHide",value:function(){var t=this.emojPanel;t&&t.hide()}},{key:"radioClk",value:function(){this.radio.classList.toggle("checked"),this.radio.checked=!this.radio.checked}},{key:"sendClk",value:function(){this.send.classList.contains("disabled")||W(this.sendCallback)&&this.sendCallback({text:this.getTextarea(),isRadioChecked:this.radio.checked})}},{key:"sendEnable",value:function(t){this.textarea.value&&t?this.send.classList.remove("disabled"):this.send.classList.add("disabled")}},{key:"hide",value:function(){this.container.style.display="none",this.getTextarea()&&this.actionCallback("publish-textarea-draft")}},{key:"show",value:function(){this.container.style.display="block"}},{key:"checkRealShow",value:function(t){var e=this.actionCallback;if(Fn(this.container)&&e("publish-show"),Fn(this.operatorBar)){this.options.emojPanelId&&e("publish-emoj-show");var n=this.options.radio,i=n.label,o=n.checked;i&&e("publish-radio-show",{checked:o}),t&&t()}}}]),t}(),qn=function(t){var e=new Kn(t);return e.render(),e};B(".interact-bar{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:16px;font-family:PingFangSC-Regular;font-size:13px;color:#9195a3}.interact-bar:hover .delete,.interact-bar:hover .report{display:block}.interact-bar>*{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.interact-bar-left{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}.interact-bar-left .delete,.interact-bar-left .report{display:none;margin-left:10px;cursor:pointer}.interact-bar-right{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;color:#222}.interact-bar-right .like,.interact-bar-right .reply{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.interact-bar-right .icon{background-repeat:no-repeat;background-size:cover;background-position:50%}.interact-bar-right .reply{cursor:pointer}.interact-bar-right .reply-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-reply.png)}.interact-bar-right .like{cursor:pointer;margin-left:16px}.interact-bar-right .like-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-like.png)}.interact-bar-right .like.liked{color:#f33}.interact-bar-right .like.liked .like-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-liked.png)}.interact-bar-right .icon{width:20px;height:20px}.interact-bar .custom-dialog{position:absolute;left:0;top:56px;z-index:1}");var zn=je(),Gn=function(){function t(e){var i=this;n(this,t),this.createTime=e.createTime,this.isAuthor=e.isAuthor,this.uname=e.uname,this.isUped=!!+e.isUped,this.likeCount=+e.likeCount,this.appid=e.appid,this.threadId=e.threadId,this.replyId=e.replyId,this.onDeleteSuccess=e.onDeleteSuccess,this.onReplySuccess=e.onReplySuccess,this.actionCallback=e.actionCallback,zn.on("closeOtherReplyPublish",function(){i.showReplyPublish&&i.toggleReplyPublish()})}return o(t,[{key:"makeTpl",value:function(){return'\n            <div class="'.concat("interact-bar",'" data-reply-id="').concat(this.replyId,'">\n                <div class="').concat("interact-bar",'-left">\n                    <span class="time">').concat(function(t){var e="刚刚";if(!t)return e;var n=1e3*t;t=new Date(n);var i=(Date.now()-n)/1e3,o=t.getFullYear();return(new Date).getFullYear()!==o?e=Mn(t,"yyyy-MM-dd"):i>86400?e=Mn(t,"MM-dd hh:mm"):i>3600?e=parseInt(i/3600,10)+"小时前":i>60&&(e=parseInt(i/60,10)+"分钟前"),e}(this.createTime),"</span>\n                    ").concat(this.isAuthor?'<span class="delete">删除</span>':'<span class="report">举报</span>','\n                </div>\n                <div class="').concat("interact-bar",'-right">\n                    <div class="reply">\n                        <i class="icon reply-icon"></i>\n                        <span class="reply-text">回复</span>\n                    </div>\n                    <div class="like ').concat(+this.isUped?"liked":"",'">\n                        <i class="icon like-icon"></i>\n                        <span class="like-text">').concat(this.likeCount?this.likeCount:"赞","</span>\n                    </div>\n                </div>\n            </div>\n        ")}},{key:"bindEvent",value:function(t){var e=this,n=this.root=t.querySelector(".".concat("interact-bar",'[data-reply-id="').concat(this.replyId,'"]'));S(n,".delete","click",function(){e.openPanel("classic",e.onClickDelete.bind(e)),e.actionCallback("xcp-delete-click")}),S(n,".report","click",function(){e.openPanel("report",e.onClickReport.bind(e)),e.actionCallback("xcp-report-click")}),S(n,".reply","click",function(){e.toggleReplyPublish(),e.actionCallback("xcp-reply-click")}),S(n,".like","click",function(){e.onClickUpdown(),e.actionCallback("xcp-like-click",{liked:+e.isUped})})}},{key:"onClickDelete",value:function(){var t=this;this.deleting||(this.deleting=!0,P({url:we.DELETE,data:{appid:this.appid,thread_id:this.threadId,reply_id:this.replyId,user_type:0,ts:Date.now(),callback:"?"},success:function(e){e&&!+e.errno?(t.root&&w(t.onDeleteSuccess)&&t.onDeleteSuccess(),Tn.show({text:"删除成功"})):Tn.show({text:"删除失败，请稍后重试"}),t.deleting=!1},error:function(){Tn.show({text:Re}),t.deleting=!1}}))}},{key:"onClickReport",value:function(t){var e=this;this.reporting||An().then(function(){e.reporting=!0,e.actionCallback("xpc-login-succ",{userName:be.curUserName,location:"report"}),P({url:we.REPORT,data:{appid:e.appid,thread_id:e.threadId,reply_id:e.replyId,reason:t.item&&t.item.id,ts:Date.now(),callback:"?"},success:function(t){Tn.show(t&&!+t.errno?{text:"感谢你的举报"}:{text:Re}),e.reporting=!1},error:function(){Tn.show({text:Re}),e.reporting=!1}})})}},{key:"onClickUpdown",value:function(){var t=this;this.updowning||An().then(function(){t.updowning=!0,t.actionCallback("xpc-login-succ",{userName:be.curUserName,location:"like"}),P({url:we.UPDOWN,data:a({appid:t.appid,thread_id:t.threadId,reply_id:t.replyId,ts:Date.now(),callback:"?"},t.isUped?{undo_type:1}:{type:1}),success:function(e){var n=e&&e.errno;0==+n?t.changeUpdownStatus(!t.isUped):Tn.show(701==+n?{text:Te}:{text:Re}),t.updowning=!1},error:function(){Tn.show({text:Re}),t.updowning=!1}})})}},{key:"changeUpdownStatus",value:function(t){if(this.root){this.isUped=t;var e=this.root.querySelector(".like"),n=e.querySelector(".like-text");t?(e.classList.add("liked"),n.innerText=++this.likeCount):(e.classList.remove("liked"),n.innerText=--this.likeCount,this.likeCount<=0&&(this.likeCount=0,n.innerText="赞"))}}},{key:"openPanel",value:function(t,e){var n=document.createElement("div");n.classList.add("custom-dialog"),this.root.insertAdjacentElement("beforeend",n),"classic"===t?new Dn({container:n,message:"确认要删除该评论吗",onConfirm:function(){w(e)&&e()},onClose:function(){return n.parentElement.removeChild(n)}}):"report"===t?function(t){var e=new On(t);e.render()}({container:n,title:"选择举报原因",list:Pe,clickCallback:function(t){w(e)&&e(t)},closeCallback:function(){return n.parentElement.removeChild(n)}}):w(e)&&e()}},{key:"toggleReplyPublish",value:function(){var t=this,e="reply-".concat(this.replyId),n=this.root.querySelector(".reply-text"),i=function(){t.showReplyPublish=!1;var i=document.getElementById(e);i.parentElement.removeChild(i),n.innerText="回复"};if(this.showReplyPublish)i();else{zn.emit("closeOtherReplyPublish"),this.showReplyPublish=!0,n.innerText="取消回复";var o=document.createElement("div");o.id=e,o.style.paddingTop="17px",this.root.insertAdjacentElement("afterEnd",o),qn({fullWidth:!0,containerId:e,radio:{label:"同时评论原文",checked:!1},placeholder:"回复".concat(this.uname,":"),sendCallback:function(e){e.text&&An().then(function(){t.actionCallback("xpc-login-succ",{userName:be.curUserName,location:"reply"}),ne(c({replyId:t.replyId},e)).then(function(e){i(),w(t.onReplySuccess)&&t.onReplySuccess(e)}).catch(function(){})})},actionCallback:this.actionCallback})}}}]),t}();B(".xcp-item{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:40px;font-size:14px;color:#222}.xcp-item .left{width:64px}.is-second .xcp-item .left{width:55px}.xcp-item .right{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.is-second .xcp-item{padding-top:30px}");var Jn=function(){function t(e){n(this,t),this.container=e.container,this.appid=e.appid,this.data=e.data||{},this.isSecond=e.isSecond||!1,this.onDeleteSuccess=e.onDeleteSuccess,this.unshiftReply=e.unshiftReply,this.syncTextComment=e.syncTextComment,this.actionCallback=e.actionCallback,this.render(),this.bindEvent()}return o(t,[{key:"render",value:function(){var t=this,e=this.data,n=document.createElement("div");n.classList.add("xcp-item"),n.dataset.replyId=e.reply_id;var i=document.createElement("div"),o=document.createElement("div");if(i.classList.add("left"),o.classList.add("right"),this.avatar=new Xe({container:i,src:e.avatar,vip:e.vtype,isSmall:this.isSecond,url:Se(e.uk),actionCallback:this.actionCallback}),this.userBar=new We({uname:e.uname,isAuthor:e.author_comment,verified:e.verified,decorations:e.decorations}),this.richText=new wn({content:e.content,contentRich:e.content_rich,replyToComment:e.reply_to_comment,hotLevel:e.hot_level,replyId:e.reply_id}),this.interactBar=new Gn({createTime:e.create_time,isAuthor:e.is_author,uname:e.uname,isUped:e.is_uped,likeCount:e.like_count,appid:this.appid,threadId:e.thread_id,replyId:e.reply_id,onDeleteSuccess:function(){return t.onDeleteSuccess({target:t.container,replyCount:+e.reply_count})},onReplySuccess:function(e){return t.onReplySuccess(e)},actionCallback:this.actionCallback}),e.image_list){var r=e.image_list;this.imageScale=new En({thumb:r.thumb&&r.thumb.url,large:r.large&&r.large.url,type:r.type,replyId:e.reply_id})}var a="\n            ".concat(this.userBar.makeTpl(),"\n            ").concat(this.richText.makeTpl(),"\n            ").concat(this.imageScale&&this.imageScale.makeTpl()||"","\n            ").concat(this.interactBar.makeTpl(),"\n        ");if(o.innerHTML=a,e.reply_list&&e.reply_list.length){var s=document.createElement("div");this.children=new Yn({container:s,appid:this.appid,threadId:e.thread_id,isSecond:!0,listData:e.reply_list,parentId:e.reply_id,replyCount:e.reply_count,onUpdateReplyCount:function(e){return t.onUpdateReplyCount(e)},actionCallback:this.actionCallback}),o.appendChild(s)}n.insertAdjacentElement("afterbegin",i),n.insertAdjacentElement("beforeend",o),this.container.appendChild(n)}},{key:"bindEvent",value:function(){var t=this,e=this.container;this.richText.bindEvent(e),this.imageScale&&this.imageScale.bindEvent(e),this.interactBar.bindEvent(e),S(e,".".concat("xcp-item"),"click",function(e){var n=e.target;(n.closest(".".concat(t.avatar.prefixCls))||n.closest(".".concat(t.userBar.prefixCls)))&&(t.actionCallback("xcp-user-click"),window.open(Se(t.data.uk)))})}},{key:"onReplySuccess",value:function(t){var e=this;if(t.sync_text_comment&&w(this.syncTextComment)&&this.syncTextComment(t.sync_text_comment),this.isSecond)w(this.unshiftReply)&&this.unshiftReply(t);else if(this.children)this.children.unshiftItem(t);else{this.data.reply_count=1,this.data.reply_list=[t];var n=document.createElement("div");this.children=new Yn({container:n,appid:this.appid,threadId:t.thread_id,isSecond:!0,listData:this.data.reply_list,parentId:this.data.reply_id,replyCount:this.data.reply_count,onUpdateReplyCount:function(t){return e.onUpdateReplyCount(t)},actionCallback:this.actionCallback}),this.container.querySelector(".right").insertAdjacentElement("beforeEnd",n),this.children.changeCommentCount({type:"++"})}}},{key:"onUpdateReplyCount",value:function(t){this.data.reply_count=t}}]),t}();B(".xcp-list *{-webkit-box-sizing:content-box;box-sizing:content-box}.xcp-list-title{font-family:PingFangSC-Semibold;font-size:18px;line-height:1;color:#000}.xcp-list-loader{margin-top:64px;height:42px;font:14px PingFangSC-Regular;text-align:center;line-height:42px;color:#626675;background:#f5f5f6;border-radius:6px;cursor:pointer}.xcp-list-loader.no-more{background:transparent}.xcp-list-loader.is-second{margin-top:30px;padding-left:55px;height:auto;text-align:left;font:13px/1 PingFangSC-Semibold;font-size:13px;color:#222;background:transparent}.xcp-list-loader.is-second .icon{display:inline-block;width:17px;height:13px;background-repeat:no-repeat;background-size:cover;vertical-align:middle}.xcp-list-loader.is-second .icon-up{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-arrow-up.png)}.xcp-list-loader.is-second .icon-down{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-arrow-down.png)}");var Vn=je(),Yn=function(){function t(e){var i=this;n(this,t),this.container=e.container,this.appid=e.appid,this.threadId=e.threadId||"",this.source=e.source||"",this.isSecond=e.isSecond||!1,this.listData=e.listData||[],this.parentId=e.parentId||"0",this.replyCount=+e.replyCount||0,this.onUpdateReplyCount=e.onUpdateReplyCount,this.onUpdateData=e.onUpdateData,this.actionCallback=w(e.actionCallback)?e.actionCallback:function(){},this.queryConf=a({},ye,{thread_id:this.threadId,appid:this.appid,use_uk:1}),this.isSecond&&(delete this.queryConf.inner_order,this.queryConf=a(this.queryConf,{num:10,use_list:0,reply_id:this.parentId,order:"9"})),this.loaderStatus={isClosed:!0},this.isSecond&&this.listData.length?(this.render(),this.loaderStatus.hasMore=this.replyCount>2,this.savedOutReplyId=this.listData.map(function(t){return t.reply_id})):this.fetchData(),this.bindEvent(),this.isSecond||(Vn.on("syncTextComment",function(t){return i.syncTextComment(t)
}),Vn.on("changeCommentCount",function(t){return i.changeCommentCount(t)}))}return o(t,[{key:"fetchData",value:function(){var t=this;this.changeLoaderStatus({isLoading:!0}),P({url:this.isSecond?we.LIST2:we.LIST1,data:a(this.queryConf,{ts:Date.now()}),success:function(e){if(e&&!+e.errno&&e.ret){var n=e.ret||{};t.isSecond&&t.loaderStatus.isClosed&&(t.changeLoaderStatus({isClosed:!1}),n.list=n.list.filter(function(e){return-1===t.savedOutReplyId.indexOf(e.reply_id)})),t.updateData(n),(n.list||[]).length&&t.render()}else t.changeLoaderStatus({isLoading:!1,isError:!0})},error:function(){t.changeLoaderStatus({isLoading:!1,isError:!0})}})}},{key:"updateData",value:function(t){this.allData=t,this.listData=t.list||[],this.isSecond||(be.commentCount=+t.comment_count,be.isLogin=!!+t.is_login,be.userInfo=a(be.userInfo,t.userinfo),w(this.onUpdateData)&&this.onUpdateData(be.userInfo))}},{key:"render",value:function(){var t=this,e=this.root||document.createElement("div");e.classList.add("xcp-list");var n=this.list||document.createElement("div");n.classList.add("".concat("xcp-list","-list")),this.isSecond?n.classList.add("is-second"):e.insertAdjacentHTML("afterbegin",this.changeTitle()),this.listData.map(function(e){var i=document.createElement("div");new Jn({container:i,appid:t.appid,data:e,isSecond:t.isSecond,onDeleteSuccess:function(e){return t.deleteItem(e)},unshiftReply:function(e){return t.unshiftItem(e)},syncTextComment:function(e){return t.syncTextComment(e)},actionCallback:t.actionCallback}),n.appendChild(i)}),!this.list&&e.appendChild(n),e.insertAdjacentHTML("beforeend",this.changeLoaderStatus({isLoading:!1,isError:!1,hasMore:this.allData&&!+this.allData.is_over})),!this.root&&this.container.insertAdjacentElement("beforeend",e),this.root=e,this.list=n}},{key:"makeTplTitle",value:function(t){var e=this.allData&&this.allData.comment_count,n=t||e,i="评论列表";return n&&(this.allData&&(this.allData.comment_count=n),i+="（".concat(n,"条）")),'<h2 class="'.concat("xcp-list",'-title">').concat(i,"</h2>")}},{key:"changeTitle",value:function(t){var e=this.container.querySelector(".".concat("xcp-list","-title"));return e?(e.outerHTML=this.makeTplTitle(t),""):this.makeTplTitle(t)}},{key:"makeTplLoader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.loaderStatus=a(this.loaderStatus,t),n="",i="",o="";return this.isSecond?(i+="is-second",e.isClosed&&this.replyCount<=2?n="":e.isClosed&&this.replyCount>2?(n="全部".concat(this.replyCount,"条回复"),o+="icon-down"):e.hasMore?(n="查看全部回复",o+="icon-down"):(n="收起",o+="icon-up")):e.isLoading?n=ke:e.isError?n=_e:e.hasMore?n=Ce:(n=Ee,i+="no-more"),n?'\n            <div\n                class="'.concat("xcp-list","-loader ").concat(i,'"\n                data-parent-id="').concat(this.parentId,'"\n            >\n                <span>').concat(n,"</span>\n                ").concat(this.isSecond?'<i class="icon '.concat(o,'"></i>'):"","\n            </div>\n        "):""}},{key:"changeLoaderStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.container.querySelector(".".concat("xcp-list",'-loader[data-parent-id="').concat(this.parentId,'"]'));return e?(e.outerHTML=this.makeTplLoader(t),""):this.makeTplLoader(t)}},{key:"closeList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=this.container.querySelector(".".concat("xcp-list","-list"));e.children.length>t;)e.removeChild(e.lastElementChild);this.queryConf.start=0,this.changeLoaderStatus({isClosed:!0,hasMore:!0})}},{key:"bindEvent",value:function(){var t=this;S(this.container,".".concat("xcp-list",'-loader[data-parent-id="').concat(this.parentId,'"]'),"click",function(){!t.isSecond||t.loaderStatus.hasMore?!t.loaderStatus.isLoading&&t.loaderStatus.hasMore&&(t.loaderStatus.isError||(t.queryConf.start+=t.isSecond&&t.loaderStatus.isClosed?0:t.queryConf.num),t.actionCallback("xcp-loader-click",{isSecond:t.isSecond}),t.fetchData()):t.closeList()})}},{key:"changeCommentCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isSecond)Vn.emit("changeCommentCount",t);else{var e=this.allData.comment_count;e="number"==typeof t.count?t.count:"--"===t.type?--this.allData.comment_count:++this.allData.comment_count,be.commentCount=e,this.changeTitle(e)}}},{key:"afterDeleteItem",value:function(t){this.changeCommentCount(this.isSecond?{type:"--"}:{count:+this.allData.comment_count-1-t}),this.isSecond&&(this.replyCount--,this.onUpdateReplyCount(this.replyCount),this.changeLoaderStatus())}},{key:"deleteItem",value:function(t){this.list&&(this.list.removeChild(t.target),this.afterDeleteItem(t.replyCount),this.isSecond||this.list.children.length||!this.root||(this.root.outerHTML="",this.root=null,this.list=null))}},{key:"afterUnshiftItem",value:function(){this.changeCommentCount({type:"++"}),this.isSecond&&(this.replyCount++,this.onUpdateReplyCount(this.replyCount),this.changeLoaderStatus())}},{key:"unshiftItem",value:function(t){var e=this;if(!this.isSecond&&!this.list)return this.listData=[t],this.changeCommentCount({type:"++"}),void this.render();var n=document.createElement("div");new Jn({container:n,appid:this.appid,data:t,isSecond:this.isSecond,onDeleteSuccess:function(t){return e.deleteItem(t)},actionCallback:this.actionCallback}),this.list.insertAdjacentElement("afterBegin",n),this.afterUnshiftItem()}},{key:"syncTextComment",value:function(t){this.isSecond?Vn.emit("syncTextComment",t):this.unshiftItem(t)}}]),t}();B(".xcp-publish{padding-bottom:20px}.xcp-publish-title{font-family:PingFangSC-Semibold;font-size:18px;line-height:1;color:#000}.xcp-publish-main{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:20px}.xcp-publish-main .left{padding-top:17px;width:64px}");var Xn=function(){function t(e){n(this,t),this.container=e.container,this.avatarSrc=be.userInfo&&be.userInfo.avatar,this.onPublishSuccess=e.onPublishSuccess,this.actionCallback=w(e.actionCallback)?e.actionCallback:function(){},this.render()}return o(t,[{key:"render",value:function(){var t=this,e=document.createElement("div");e.classList.add("xcp-publish");var n=document.createElement("div");n.classList.add("".concat("xcp-publish","-main"));var i=document.createElement("div");i.classList.add("left"),this.avatar=new Xe({container:i,src:this.avatarSrc});var o=document.createElement("div");o.id="xcp-publisher",o.classList.add("right"),n.insertAdjacentElement("beforeEnd",i),n.insertAdjacentElement("beforeEnd",o),e.insertAdjacentHTML("afterBegin",'<h2 class="'.concat("xcp-publish",'-title">发表评论</h2>')),e.insertAdjacentElement("beforeEnd",n),this.container.insertAdjacentElement("afterBegin",e),this.publish=qn({containerId:"xcp-publisher",radio:{label:""},sendCallback:function(e){delete e.isRadioChecked,e&&e.text&&An().then(function(){t.actionCallback("xpc-login-succ",{userName:be.curUserName,location:"publish"}),ne(e).then(function(e){w(t.onPublishSuccess)&&t.onPublishSuccess(e),t.publish.clearTextarea()}).catch(function(){})}).catch(function(){})},actionCallback:this.actionCallback})}},{key:"updateData",value:function(t){this.avatarSrc=t.avatar,this.avatar.updateSrc({src:this.avatarSrc})}},{key:"checkRealShow",value:function(t){this.publish.checkRealShow(t)}}]),t}(),Wn="object"===("undefined"==typeof window?"undefined":e(window))?window:global,Zn=function(t){if("function"==typeof t){var e="_xfunc_".concat(an());return Wn[e]=function(){for(var e=arguments.length,n=new Array(e),i=0;e>i;i++)n[i]=arguments[i];return t.apply(Wn,n)},e}return t},ti=encodeURIComponent,ei=function(t){return ti(t).replace(/[!'()*]/g,function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())})},ni=decodeURIComponent,ii=new RegExp("%[a-f0-9]{2}","gi"),oi=new RegExp("(%[a-f0-9]{2})+","gi"),ri=function(t){if("string"!=typeof t)throw jn("encodedURI","string",t);try{return t=t.replace(/\+/g," "),ni(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=oi.exec(t);n;){try{e[n[0]]=ni(n[0])}catch(t){var i=se(n[0]);i!==n[0]&&(e[n[0]]=i)}n=oi.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),r=0;r<o.length;r++){var a=o[r];t=t.replace(new RegExp(a,"g"),e[a])}return t}(t)}},ai=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.split("?"),i=n[1]?n[1]:n[0],o=i.split("&"),r={};return o.forEach(function(t){if((t=t.split("="))[0].length>0){var n="";try{n=(e?ri(t[1]):decodeURIComponent(t[1]))||""}catch(t){console.log(t)}r[t[0]]=n}}),r},si=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.split("?"),i=p(n,2),o=i[0],r=i[1],a=void 0===r?"":r;return{url:o,query:e?ai(a):a}},ci=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var o=si(e);if(0===(e=o.url).indexOf("//")){var r=location.protocol;"http:"!==r&&(r="https:"),e=r+e}this.url=e;var s=i.globalData||{};this._default=a(o.query||{},s),this._data={},this._before=i.before}return o(t,[{key:"setGlobalData",value:function(t){return X(t)&&le(this._default,t),this}},{key:"mark",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!X(t))throw jn("data","object",t);return X(t)&&a(this._mdata,t),this}},{key:"_send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!X(t))throw jn("data","object",t);var n=new Image(1,1),i="_xbox_mt_".concat(an());window[i]=n,n.onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null,window[i]=n=null},t=le({},this._default,t);var o=this._before;if(!e&&W(o)){var r=o(t);if(!1===r)return this;Y(r)||(X(r)||Z(r))&&(t=r)}var a="".concat(this.url,"?").concat(Z(t)?t:oe(t,!0));return n.src=a+"&_rnd="+an(),this}},{key:"send",value:function(t){return this._send(this._data,t),delete this._mdata,this._mdata={},this}},{key:"report",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(!X(t))throw jn("data","object",t);return this._send(t,e)}}]),t}(),li="object"===("undefined"==typeof window?"undefined":e(window))&&window.self===window?navigator.userAgent:"",di=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:li;"main"===t&&(t="");var n=/ (baiduboxapp|biduboxapp)\//i;if(!1===n.test(e))return!1;var i=e.match(n),o=i[1];return!!~e.indexOf("".concat(t," ").concat(o))},ui=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:li;"main"===t&&(t="");var n=/\bbdapp\/\d+\.\d+\s+\((\w+);\s*(\w+)\)/;if(""===t){var i=/\s(lite|pro|info|mission)\sbaiduboxapp\//.exec(e);if(i)return!0;if(/\bbdapp\/\d+\.\d+\s/.test(e))return!0}else if(!1===t){var o=e.match(n);if(o&&o[1])return!0}else{if(new RegExp(new RegExp("\\s".concat(t,"\\sbaiduboxapp/"))).test(e))return!0;var r=e.match(n);if(r&&r[1]&&r[1]===t)return!0}return!1},hi="object"===("undefined"==typeof window?"undefined":e(window))&&window.self===window?navigator.userAgent:"",fi=ai(location.search),pi=navigator.userAgent,gi=function(t){function e(t){n(this,e);var o={};return fi.uid&&fi.osname&&["osname","ua","ut","from","cfrom","uid","pkgname"].forEach(function(t){fi[t]&&(o[t]=fi[t])}),i.call(this,t?"https://mbd.baidu.com/ztbox":"https://mbd.baidu.com/tcbox",{globalData:c(c({},o),{},{service:"bdbox",action:t||"pblog",ctv:2,cen:"uid_ua_ut",data:{appid:di("lite")?10001:di("info")?10002:"1",dataid:"2",actiontype:"1",actionid:"2",actiondata:{boxV:ue(),ref:fi.ref||"",gmv:fi.vmgdb||"",source:fi.from||fi.ref||"",boxVersion:de(),boxPlatform:pi.match(/(iPad|iPhone|iPod)/gim)?"ios":"android"}}})})}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,t);var i=h(e);return o(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=p(t,2),i=n[0],o=n[1],r=X(o)?o:{};return r.data={},r.data.cateid=i,f(l(e.prototype),"setGlobalData",this).call(this,r)}},{key:"pv",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=p(t,2),i=n[0],o=n[1],r={actionid:"1",actiondata:{url:i||location.href}};return o&&(r.actiondata.u=o),f(l(e.prototype),"report",this).call(this,{data:r})}},{key:"event",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=p(t,4),i=n[0],o=n[1],r=void 0===o?"":o,a=n[2],s=void 0===a?"":a,c=n[3];if(!i)throw"monitor.tc.event need a evtName";var d={};if(X(r)&&!s)for(var u in d={evtName:i},r)d[u]=r[u];else d={evtName:i,evtType:r,evtTag:s};var h={actionid:"2",actiondata:d};return c&&(h.cateid=c),f(l(e.prototype),"report",this).call(this,{data:h})}},{key:"newEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=p(t,2),i=n[0],o=n[1],r={actionid:"2",actiondata:i};return o&&(r.cateid=o),f(l(e.prototype),"report",this).call(this,{data:r})}}]),e}(ci),mi=new gi,vi="visible"===(document.visibilityState||document.webkitVisibilityState),bi=function(t){vi?requestAnimationFrame(t):setTimeout(t,15)},yi=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];return mi[t].apply(mi,n)},xi=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];var o=this&&this!==window?this:mi;if("complete"!==document.readyState){var r=function a(){bi(function(){o[t].apply(o,n)}),window.removeEventListener("load",a)};window.addEventListener("load",r)}else bi(function(){o[t].apply(o,n)})},wi=de()||"",ki=wi.split(".").slice(0,2).join(".")||"",_i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li;return fe(t)?"ios":he(t)?"android":"unknown"}()||"",Ci=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.id,o=t.flow,r=void 0===o?"":o,s=t.action;delete t.action,delete t.id,delete t.flow;var c=e.from,l=void 0===c?"":c,d=e.page,u=void 0===d?"":d,h=e.source,f=void 0===h?"":h,p=e.ext,g=void 0===p?{}:p,m=e.logId,v=void 0===m?"11414":m;g=t.ext?a({},g,t.ext):g,delete t.ext;var b={id:i||v,type:0,content:a({boxVersion:wi,boxV:ki,platform:_i,from:l,type:"",page:u,source:f,value:"",ext:g},t)};r&&(b.flow=r),"zpblog"===s?xi.call(new gi("zpblog"),"newEvent",[b,99]):n?xi("newEvent",[b,99]):yi("newEvent",[b,99])},Ei={},Ri=1,Ti=Date.now(),Pi=!1,Si=function(t){var e=t||{},n=e.source,i=e.nid,o=e.tid,r=e.isLogin;Ei={from:"comment",page:"comment_module",source:n,value:+r,ext:{nid:""+i,topicid:""+o,num:be.commentCount}}},Ii=function(t,e){Fn(e,340,be.winHeight)&&("hide"===t?Ci(c(c({},Ei),{},{type:"comment_duration",ext:{time:String(Date.now()-Ti)},value:be.isLogin})):("show"===t&&(Ri++,Ti=Date.now(),Pi=!1),!Pi&&Ci(c(c({},Ei),{},{type:"comment_show",ext:{count:Ri},value:be.isLogin?+be.isLogin:Ei.value})),Pi=!0))},Li=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};switch(t){case"publish-emoj-show":e="emoji_button_show";break;case"publish-radio-show":e=n.checked?"forward_show_1":"forward_show_0";break;case"publish-emoj-click":e="emoji_button_clk";break;case"publish-radio-click":e=n.checked?"forward_success":"forward_cancel";break;case"publish-send-click":e="publish_button";break;case"publish-textarea-click":e="input_box_clk";break;case"publish-emojItem-click":e="emoji_id_clk",i={id:n.id};break;case"publish-textarea-draft":e="publish_comment_draft";break;case"xcp-user-click":e="user_name_clk";break;case"xcp-like-click":e=n.liked?"praise_clk":"praise_cancel_clk ";break;case"xcp-delete-click":e="delete_clk";break;case"xcp-reply-click":e="reply_clk";break;case"xcp-report-click":e="report_clk";break;case"xcp-loader-click":e=n.isSecond?"view_replyall_clk":"view_all_clk"}e&&Ci(c(c({},Ei),{},{type:e,ext:i,value:be.isLogin?+be.isLogin:Ei.value}))};!function(t){var e=t.Element.prototype;"function"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=0;e[n]&&e[n]!==this;)++n;return Boolean(e[n])}),"function"!=typeof e.closest&&(e.closest=function(t){for(var e=this;e&&1===e.nodeType;){if(e.matches(t))return e;e=e.parentNode}return null})}(window);var Ai=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n(this,t),this.options=c({source:"xbox-comment-pc",isNeedPublish:!0,openBrowserLimit:!0},i),this.container=document.getElementById(this.options.containerId),!this.options.openBrowserLimit||be.isHigherBrowser){var o=this.options,r=o.appid,a=o.source,s=o.tid,l=o.isNeedPublish,d=o.staticPage,u=o.actionCallback;this.appid=be.appid=r||"22862035",this.threadId=be.threadId=s,this.source=a,this.isNeedPublish=l,this.actionCallback=w(u)?u:function(){},be.passStaticPage=d,Si(this.options),this.render(),setTimeout(function(){Ii("first",e.container)},100),this.bindEvent()}else this.container&&(this.container.style.display="none")}return o(t,[{key:"render",value:function(){var t=this;if(this.isNeedPublish){var e=document.createElement("div");this.container.appendChild(e),this.publish=new Xn({container:e,onPublishSuccess:function(e){t.list.unshiftItem(e)},actionCallback:function(e,n){Li(e,n),t.actionCallback(e,n)}})}var n=document.createElement("div");this.list=new Yn({container:n,appid:this.appid,threadId:this.threadId,source:this.source,onUpdateData:function(e){t.publish&&t.publish.updateData(e)},actionCallback:function(e,n){Li(e,n),t.actionCallback(e,n)}}),this.container.appendChild(n)}},{key:"bindEvent",value:function(){var t=this,e=!1;w(this.publish.checkRealShow)&&this.publish.checkRealShow,window.addEventListener("scroll",function(){Ii("scroll",t.container),e||w(t.publish.checkRealShow)&&t.publish.checkRealShow(function(){e=!0})},!1),function(t){var e=t.showCb,n=t.hiddenCb,i=t.show,o=t.hidden,r=t.hide;e=e||i,n=n||o||r;var a="",s="";void 0!==document.visibilityState?(a="visibilityState",s="visibilitychange"):void 0!==document.webkitVisibilityState&&(a="webkitVisibilityState",s="webkitvisibilitychange"),s?document.addEventListener(s,function(){"visible"===document[a]?e&&e():n&&n()},!1):console.log("browser donot supports the Page Visibility API.")}({showCb:function(){Ii("show",t.container),e=!1,w(t.publish.checkRealShow)&&t.publish.checkRealShow()},hiddenCb:function(){Ii("hide",t.container)}})}}]),t}();t.CommentPc=Ai,t.default=function(t){return new Ai(t)},Object.defineProperty(t,"__esModule",{value:!0})}),$.extend({stringify:function(t){function e(t){return/["\\\x00-\x1f]/.test(t)&&(t=t.replace(/["\\\x00-\x1f]/g,function(t){var e=o[t];return e?e:(e=t.charCodeAt(),"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16))})),'"'+t+'"'}function n(t){var e,n,i,o=["["],r=t.length;for(n=0;r>n;n++)switch(i=t[n],typeof i){case"undefined":case"function":case"unknown":break;default:e&&o.push(","),o.push($.stringify(i)),e=1}return o.push("]"),o.join("")}if("JSON"in window)return JSON.stringify(t);var i=typeof t;if("object"!=i||null===t)return"string"==i&&(t='"'+t+'"'),String(t);var o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};switch(typeof t){case"undefined":return"undefined";case"number":return isFinite(t)?String(t):"null";case"string":return e(t);case"boolean":return String(t);default:if(null===t)return"null";if(t instanceof Array)return n(t);var r,a,s=["{"],c=$.stringify;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l))switch(a=t[l],typeof a){case"undefined":case"unknown":case"function":break;default:r&&s.push(","),r=1,s.push(c(l)+":"+c(a))}return s.push("}"),s.join("")}}}),bds.util.domain=function(){var t=$.extend({},s_domain.ssllist);$.each(t,function(e){t[e].indexOf("https://")<0&&(t[e]="https://"+t[e])});var e=function(e){if("http:"==s_domain.protocol)return e;var n=/^(http[s]?:\/\/)?([^\/]+)(.*)/,i=e.match(n);return e=t.hasOwnProperty(i[2])&&t[i[2]]+i[3]||e},n=function(e,n){t[e]=n};return{get:e,set:n}}(),bds.comm.sugHost=bds.util.domain.get("http://suggestion.baidu.com/su");var QRMode,QRErrorCorrectLevel,QRMaskPattern,QRUtil,QRMath,i;for(function(t){t.fn.qrcode=function(e){var n,i;return"string"==typeof e&&(e={text:e}),e=t.extend({},{render:"canvas",width:256,height:256,imgWidth:e.width/3,imgHeight:e.height/3,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},e),n=function(){var t,n,i,o,r,a,s,c,l,d=new QRCode(e.typeNumber,e.correctLevel);for(d.addData(utf16to8(e.text)),d.make(),t=document.createElement("canvas"),t.width=e.width,t.height=e.height,n=t.getContext("2d"),e.src&&(i=new Image,i.src=e.src,i.onload=function(){n.drawImage(i,(e.width-e.imgWidth)/2,(e.height-e.imgHeight)/2,e.imgWidth,e.imgHeight)}),o=e.width/d.getModuleCount(),r=e.height/d.getModuleCount(),a=0;a<d.getModuleCount();a++)for(s=0;s<d.getModuleCount();s++)n.fillStyle=d.isDark(a,s)?e.foreground:e.background,c=Math.ceil((s+1)*o)-Math.floor(s*o),l=Math.ceil((a+1)*o)-Math.floor(a*o),n.fillRect(Math.round(s*o),Math.round(a*r),c,l);return t},i=function(){var n,i,o,r,a,s,c=new QRCode(e.typeNumber,e.correctLevel);for(c.addData(utf16to8(e.text)),c.make(),n=t("<table></table>").css("width",e.width+"px").css("height",e.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",e.background),i=e.width/c.getModuleCount(),o=e.height/c.getModuleCount(),r=0;r<c.getModuleCount();r++)for(a=t("<tr></tr>").css("height",o+"px").appendTo(n),s=0;s<c.getModuleCount();s++)t("<td></td>").css("width",i+"px").css("background-color",c.isDark(r,s)?e.foreground:e.background).appendTo(a);return n},this.each(function(){var o="canvas"==e.render?n():i();t(o).appendTo(this)})}}(jQuery),QR8bitByte.prototype={getLength:function(){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},QRCode.prototype={addData:function(t){var e=new QR8bitByte(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){var t,e,n,i,o,r;if(this.typeNumber<1){for(t=1,t=1;40>t;t++){for(e=QRRSBlock.getRSBlocks(t,this.errorCorrectLevel),n=new QRBitBuffer,i=0,o=0;o<e.length;o++)i+=e[o].dataCount;for(o=0;o<this.dataList.length;o++)r=this.dataList[o],n.put(r.mode,4),n.put(r.getLength(),QRUtil.getLengthInBits(r.mode,t)),r.write(n);if(n.getLengthInBits()<=8*i)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){var n,i;for(this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount),n=0;n<this.moduleCount;n++)for(this.modules[n]=new Array(this.moduleCount),i=0;i<this.moduleCount;i++)this.modules[n][i]=null;this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){var n,i;for(n=-1;7>=n;n++)if(!(-1>=t+n||this.moduleCount<=t+n))for(i=-1;7>=i;i++)-1>=e+i||this.moduleCount<=e+i||(this.modules[t+n][e+i]=n>=0&&6>=n&&(0==i||6==i)||i>=0&&6>=i&&(0==n||6==n)||n>=2&&4>=n&&i>=2&&4>=i?!0:!1)},getBestMaskPattern:function(){var t,e,n=0,i=0;for(t=0;8>t;t++)this.makeImpl(!0,t),e=QRUtil.getLostPoint(this),(0==t||n>e)&&(n=e,i=t);return i},createMovieClip:function(t,e,n){var i,o,r,a,s,c=t.createEmptyMovieClip(e,n),l=1;for(this.make(),i=0;i<this.modules.length;i++)for(o=i*l,r=0;r<this.modules[i].length;r++)a=r*l,s=this.modules[i][r],s&&(c.beginFill(0,100),c.moveTo(a,o),c.lineTo(a+l,o),c.lineTo(a+l,o+l),c.lineTo(a,o+l),c.endFill());return c},setupTimingPattern:function(){var t,e;for(t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2);for(e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=0==e%2)},setupPositionAdjustPattern:function(){var t,e,n,i,o,r,a=QRUtil.getPatternPosition(this.typeNumber);for(t=0;t<a.length;t++)for(e=0;e<a.length;e++)if(n=a[t],i=a[e],null==this.modules[n][i])for(o=-2;2>=o;o++)for(r=-2;2>=r;r++)this.modules[n+o][i+r]=-2==o||2==o||-2==r||2==r||0==o&&0==r?!0:!1},setupTypeNumber:function(t){var e,n,i=QRUtil.getBCHTypeNumber(this.typeNumber);for(e=0;18>e;e++)n=!t&&1==(1&i>>e),this.modules[Math.floor(e/3)][e%3+this.moduleCount-8-3]=n;for(e=0;18>e;e++)n=!t&&1==(1&i>>e),this.modules[e%3+this.moduleCount-8-3][Math.floor(e/3)]=n},setupTypeInfo:function(t,e){var n,i,o=this.errorCorrectLevel<<3|e,r=QRUtil.getBCHTypeInfo(o);for(n=0;15>n;n++)i=!t&&1==(1&r>>n),6>n?this.modules[n][8]=i:8>n?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i;for(n=0;15>n;n++)i=!t&&1==(1&r>>n),8>n?this.modules[8][this.moduleCount-n-1]=i:9>n?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i;this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){var n,i,o,r,a=-1,s=this.moduleCount-1,c=7,l=0;for(n=this.moduleCount-1;n>0;n-=2)for(6==n&&n--;;){for(i=0;2>i;i++)null==this.modules[s][n-i]&&(o=!1,l<t.length&&(o=1==(1&t[l]>>>c)),r=QRUtil.getMask(e,s,n-i),r&&(o=!o),this.modules[s][n-i]=o,c--,-1==c&&(l++,c=7));if(s+=a,0>s||this.moduleCount<=s){s-=a,a=-a;break}}}},QRCode.PAD0=236,QRCode.PAD1=17,QRCode.createData=function(t,e,n){var i,o,r,a=QRRSBlock.getRSBlocks(t,e),s=new QRBitBuffer;for(i=0;i<n.length;i++)o=n[i],s.put(o.mode,4),s.put(o.getLength(),QRUtil.getLengthInBits(o.mode,t)),o.write(s);for(r=0,i=0;i<a.length;i++)r+=a[i].dataCount;if(s.getLengthInBits()>8*r)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*r+")");for(s.getLengthInBits()+4<=8*r&&s.put(0,4);0!=s.getLengthInBits()%8;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*r||(s.put(QRCode.PAD0,8),s.getLengthInBits()>=8*r));)s.put(QRCode.PAD1,8);return QRCode.createBytes(s,a)},QRCode.createBytes=function(t,e){var n,i,o,r,a,s,c,l,d,u,h,f=0,p=0,g=0,m=new Array(e.length),v=new Array(e.length);for(n=0;n<e.length;n++){for(i=e[n].dataCount,o=e[n].totalCount-i,p=Math.max(p,i),g=Math.max(g,o),m[n]=new Array(i),r=0;r<m[n].length;r++)m[n][r]=255&t.buffer[r+f];for(f+=i,a=QRUtil.getErrorCorrectPolynomial(o),s=new QRPolynomial(m[n],a.getLength()-1),c=s.mod(a),v[n]=new Array(a.getLength()-1),r=0;r<v[n].length;r++)l=r+c.getLength()-v[n].length,v[n][r]=l>=0?c.get(l):0}for(d=0,r=0;r<e.length;r++)d+=e[r].totalCount;for(u=new Array(d),h=0,r=0;p>r;r++)for(n=0;n<e.length;n++)r<m[n].length&&(u[h++]=m[n][r]);for(r=0;g>r;r++)for(n=0;n<e.length;n++)r<v[n].length&&(u[h++]=v[n][r]);return u},QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;QRUtil.getBCHDigit(e)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)e^=QRUtil.G15<<QRUtil.getBCHDigit(e)-QRUtil.getBCHDigit(QRUtil.G15);return(t<<10|e)^QRUtil.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;QRUtil.getBCHDigit(e)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)e^=QRUtil.G18<<QRUtil.getBCHDigit(e)-QRUtil.getBCHDigit(QRUtil.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return QRUtil.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case QRMaskPattern.PATTERN000:return 0==(e+n)%2;case QRMaskPattern.PATTERN001:return 0==e%2;case QRMaskPattern.PATTERN010:return 0==n%3;case QRMaskPattern.PATTERN011:return 0==(e+n)%3;case QRMaskPattern.PATTERN100:return 0==(Math.floor(e/2)+Math.floor(n/3))%2;case QRMaskPattern.PATTERN101:return 0==e*n%2+e*n%3;case QRMaskPattern.PATTERN110:return 0==(e*n%2+e*n%3)%2;case QRMaskPattern.PATTERN111:return 0==(e*n%3+(e+n)%2)%2;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){var e,n=new QRPolynomial([1],0);for(e=0;t>e;e++)n=n.multiply(new QRPolynomial([1,QRMath.gexp(e)],0));return n},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){var e,n,i,o,r,a,s,c,l,d=t.getModuleCount(),u=0;for(e=0;d>e;e++)for(n=0;d>n;n++){for(i=0,o=t.isDark(e,n),r=-1;1>=r;r++)if(!(0>e+r||e+r>=d))for(a=-1;1>=a;a++)0>n+a||n+a>=d||(0!=r||0!=a)&&o==t.isDark(e+r,n+a)&&i++;i>5&&(u+=3+i-5)}for(e=0;d-1>e;e++)for(n=0;d-1>n;n++)s=0,t.isDark(e,n)&&s++,t.isDark(e+1,n)&&s++,t.isDark(e,n+1)&&s++,t.isDark(e+1,n+1)&&s++,(0==s||4==s)&&(u+=3);for(e=0;d>e;e++)for(n=0;d-6>n;n++)t.isDark(e,n)&&!t.isDark(e,n+1)&&t.isDark(e,n+2)&&t.isDark(e,n+3)&&t.isDark(e,n+4)&&!t.isDark(e,n+5)&&t.isDark(e,n+6)&&(u+=40);for(n=0;d>n;n++)for(e=0;d-6>e;e++)t.isDark(e,n)&&!t.isDark(e+1,n)&&t.isDark(e+2,n)&&t.isDark(e+3,n)&&t.isDark(e+4,n)&&!t.isDark(e+5,n)&&t.isDark(e+6,n)&&(u+=40);for(c=0,n=0;d>n;n++)for(e=0;d>e;e++)t.isDark(e,n)&&c++;return l=Math.abs(100*c/d/d-50)/5,u+=10*l}},QRMath={glog:function(t){if(1>t)throw new Error("glog("+t+")");return QRMath.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return QRMath.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;8>i;i++)QRMath.EXP_TABLE[i]=1<<i;for(i=8;256>i;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(i=0;255>i;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;QRPolynomial.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){var e,n,i=new Array(this.getLength()+t.getLength()-1);for(e=0;e<this.getLength();e++)for(n=0;n<t.getLength();n++)i[e+n]^=QRMath.gexp(QRMath.glog(this.get(e))+QRMath.glog(t.get(n)));return new QRPolynomial(i,0)},mod:function(t){var e,n,i;if(this.getLength()-t.getLength()<0)return this;for(e=QRMath.glog(this.get(0))-QRMath.glog(t.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(i=0;i<t.getLength();i++)n[i]^=QRMath.gexp(QRMath.glog(t.get(i))+e);return new QRPolynomial(n,0).mod(t)}},QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(t,e){var n,i,o,r,a,s,c,l=QRRSBlock.getRsBlockTable(t,e);
if(void 0==l)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(n=l.length/3,i=new Array,o=0;n>o;o++)for(r=l[3*o+0],a=l[3*o+1],s=l[3*o+2],c=0;r>c;c++)i.push(new QRRSBlock(a,s));return i},QRRSBlock.getRsBlockTable=function(t,e){switch(e){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+3];default:return void 0}},QRBitBuffer.prototype={get:function(t){var e=Math.floor(t/8);return 1==(1&this.buffer[e]>>>7-t%8)},put:function(t,e){for(var n=0;e>n;n++)this.putBit(1==(1&t>>>e-n-1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},QR8bitByte.prototype={getLength:function(){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},QRCode.prototype={addData:function(t){var e=new QR8bitByte(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var t=1;for(t=1;40>t;t++){for(var e=QRRSBlock.getRSBlocks(t,this.errorCorrectLevel),n=new QRBitBuffer,i=0,o=0;o<e.length;o++)i+=e[o].dataCount;for(var o=0;o<this.dataList.length;o++){var r=this.dataList[o];n.put(r.mode,4),n.put(r.getLength(),QRUtil.getLengthInBits(r.mode,t)),r.write(n)}if(n.getLengthInBits()<=8*i)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var n=-1;7>=n;n++)if(!(-1>=t+n||this.moduleCount<=t+n))for(var i=-1;7>=i;i++)-1>=e+i||this.moduleCount<=e+i||(this.modules[t+n][e+i]=n>=0&&6>=n&&(0==i||6==i)||i>=0&&6>=i&&(0==n||6==n)||n>=2&&4>=n&&i>=2&&4>=i?!0:!1)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;8>n;n++){this.makeImpl(!0,n);var i=QRUtil.getLostPoint(this);(0==n||t>i)&&(t=i,e=n)}return e},createMovieClip:function(t,e,n){var i=t.createEmptyMovieClip(e,n),o=1;this.make();for(var r=0;r<this.modules.length;r++)for(var a=r*o,s=0;s<this.modules[r].length;s++){var c=s*o,l=this.modules[r][s];l&&(i.beginFill(0,100),i.moveTo(c,a),i.lineTo(c+o,a),i.lineTo(c+o,a+o),i.lineTo(c,a+o),i.endFill())}return i},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=QRUtil.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],o=t[n];if(null==this.modules[i][o])for(var r=-2;2>=r;r++)for(var a=-2;2>=a;a++)this.modules[i+r][o+a]=-2==r||2==r||-2==a||2==a||0==r&&0==a?!0:!1}},setupTypeNumber:function(t){for(var e=QRUtil.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(var n=0;18>n;n++){var i=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,i=QRUtil.getBCHTypeInfo(n),o=0;15>o;o++){var r=!t&&1==(i>>o&1);6>o?this.modules[o][8]=r:8>o?this.modules[o+1][8]=r:this.modules[this.moduleCount-15+o][8]=r}for(var o=0;15>o;o++){var r=!t&&1==(i>>o&1);8>o?this.modules[8][this.moduleCount-o-1]=r:9>o?this.modules[8][15-o-1+1]=r:this.modules[8][15-o-1]=r}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,i=this.moduleCount-1,o=7,r=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[i][a-s]){var c=!1;r<t.length&&(c=1==(t[r]>>>o&1));var l=QRUtil.getMask(e,i,a-s);l&&(c=!c),this.modules[i][a-s]=c,o--,-1==o&&(r++,o=7)}if(i+=n,0>i||this.moduleCount<=i){i-=n,n=-n;break}}}},QRCode.PAD0=236,QRCode.PAD1=17,QRCode.createData=function(t,e,n){for(var i=QRRSBlock.getRSBlocks(t,e),o=new QRBitBuffer,r=0;r<n.length;r++){var a=n[r];o.put(a.mode,4),o.put(a.getLength(),QRUtil.getLengthInBits(a.mode,t)),a.write(o)}for(var s=0,r=0;r<i.length;r++)s+=i[r].dataCount;if(o.getLengthInBits()>8*s)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*s+")");for(o.getLengthInBits()+4<=8*s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*s)&&(o.put(QRCode.PAD0,8),!(o.getLengthInBits()>=8*s));)o.put(QRCode.PAD1,8);return QRCode.createBytes(o,i)},QRCode.createBytes=function(t,e){for(var n=0,i=0,o=0,r=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s++){var c=e[s].dataCount,l=e[s].totalCount-c;i=Math.max(i,c),o=Math.max(o,l),r[s]=new Array(c);for(var d=0;d<r[s].length;d++)r[s][d]=255&t.buffer[d+n];n+=c;var u=QRUtil.getErrorCorrectPolynomial(l),h=new QRPolynomial(r[s],u.getLength()-1),f=h.mod(u);a[s]=new Array(u.getLength()-1);for(var d=0;d<a[s].length;d++){var p=d+f.getLength()-a[s].length;a[s][d]=p>=0?f.get(p):0}}for(var g=0,d=0;d<e.length;d++)g+=e[d].totalCount;for(var m=new Array(g),v=0,d=0;i>d;d++)for(var s=0;s<e.length;s++)d<r[s].length&&(m[v++]=r[s][d]);for(var d=0;o>d;d++)for(var s=0;s<e.length;s++)d<a[s].length&&(m[v++]=a[s][d]);return m};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;QRUtil.getBCHDigit(e)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)e^=QRUtil.G15<<QRUtil.getBCHDigit(e)-QRUtil.getBCHDigit(QRUtil.G15);return(t<<10|e)^QRUtil.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;QRUtil.getBCHDigit(e)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)e^=QRUtil.G18<<QRUtil.getBCHDigit(e)-QRUtil.getBCHDigit(QRUtil.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return QRUtil.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case QRMaskPattern.PATTERN000:return(e+n)%2==0;case QRMaskPattern.PATTERN001:return e%2==0;case QRMaskPattern.PATTERN010:return n%3==0;case QRMaskPattern.PATTERN011:return(e+n)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case QRMaskPattern.PATTERN101:return e*n%2+e*n%3==0;case QRMaskPattern.PATTERN110:return(e*n%2+e*n%3)%2==0;case QRMaskPattern.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new QRPolynomial([1],0),n=0;t>n;n++)e=e.multiply(new QRPolynomial([1,QRMath.gexp(n)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;e>i;i++)for(var o=0;e>o;o++){for(var r=0,a=t.isDark(i,o),s=-1;1>=s;s++)if(!(0>i+s||i+s>=e))for(var c=-1;1>=c;c++)0>o+c||o+c>=e||(0!=s||0!=c)&&a==t.isDark(i+s,o+c)&&r++;r>5&&(n+=3+r-5)}for(var i=0;e-1>i;i++)for(var o=0;e-1>o;o++){var l=0;t.isDark(i,o)&&l++,t.isDark(i+1,o)&&l++,t.isDark(i,o+1)&&l++,t.isDark(i+1,o+1)&&l++,(0==l||4==l)&&(n+=3)}for(var i=0;e>i;i++)for(var o=0;e-6>o;o++)t.isDark(i,o)&&!t.isDark(i,o+1)&&t.isDark(i,o+2)&&t.isDark(i,o+3)&&t.isDark(i,o+4)&&!t.isDark(i,o+5)&&t.isDark(i,o+6)&&(n+=40);for(var o=0;e>o;o++)for(var i=0;e-6>i;i++)t.isDark(i,o)&&!t.isDark(i+1,o)&&t.isDark(i+2,o)&&t.isDark(i+3,o)&&t.isDark(i+4,o)&&!t.isDark(i+5,o)&&t.isDark(i+6,o)&&(n+=40);for(var d=0,o=0;e>o;o++)for(var i=0;e>i;i++)t.isDark(i,o)&&d++;var u=Math.abs(100*d/e/e-50)/5;return n+=10*u}},QRMath={glog:function(t){if(1>t)throw new Error("glog("+t+")");return QRMath.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return QRMath.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;8>i;i++)QRMath.EXP_TABLE[i]=1<<i;for(var i=8;256>i;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(var i=0;255>i;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;QRPolynomial.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=QRMath.gexp(QRMath.glog(this.get(n))+QRMath.glog(t.get(i)));return new QRPolynomial(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=QRMath.glog(this.get(0))-QRMath.glog(t.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(var i=0;i<t.getLength();i++)n[i]^=QRMath.gexp(QRMath.glog(t.get(i))+e);return new QRPolynomial(n,0).mod(t)}},QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(t,e){var n=QRRSBlock.getRsBlockTable(t,e);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=n.length/3,o=new Array,r=0;i>r;r++)for(var a=n[3*r+0],s=n[3*r+1],c=n[3*r+2],l=0;a>l;l++)o.push(new QRRSBlock(s,c));return o},QRRSBlock.getRsBlockTable=function(t,e){switch(e){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+3];default:return void 0}},QRBitBuffer.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;e>n;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},F.module("superlanding:article/usrMenu",function(t,e){function n(){i("usrname","user_menu","usrname","left",1),i("user_menu","user_menu","usrname","left",1)}function i(t,e,n,i){var r=$("#"+t),a=$("#"+n),c=$("#"+e);r.bind("mouseenter",function(){s=!0,c.show();var t="left"==i?a.position().left+(a.width()-c.width())/2:$(document.body).width()-c[0].offsetWidth/2-a.offset().left-a.width()/2;c.css({left:t}),o()}).bind("mouseleave",function(){s=!1,setTimeout(function(){s||c.hide()},200)})}function o(){$(".s-feedback").off("click").on("click",function(){window.bds&&window.bds.qa&&window.bds.qa.ShortCut?a():r($.url.escapeSSL("http://f3.baidu.com/feedback/js/feedback/feedback0.0.2-nj.js")+"?t="+ +new Date,"s_feedback_script",function(){a()})})}function r(t,e,n){var i=document.createElement("script");e&&(i.id=e),i.type="text/javascript",i.src=t,document.body.appendChild(i),i.onload=i.onreadystatechange=function(){/undefined|loaded|complete/.test(this.readyState)&&(n&&n(),i.onload=i.onreadystatechange=null)}}function a(){if(bds&&bds.qa&&bds.qa.ShortCut&&bds.qa.ShortCut.initRightBar){var t={product_id:1};bds.qa.ShortCut.initRightBar(t)}}var s=!1;e.init=n}),F.module("superlanding:article/topBtm",function(t,e){function n(){$(document).on("scroll",i(o,200,500))}function i(t,e,n){var i,o=new Date;return function(){var r=this,a=arguments,s=new Date;clearTimeout(i),s-o>=n?(t.apply(r,a),o=s):i=setTimeout(t,e)}}function o(){$(".back-to-top").css($(document).scrollTop()>0?{visibility:"visible"}:{visibility:"hidden"}),$(".back-to-top").on("click",function(t){$(document).scrollTop(0),t.stopPropagation()}).on("mouseenter mouseleave",function(t){"mouseenter"===t.type?$(this).addClass("icon-over"):"mouseleave"===t.type&&$(this).removeClass("icon-over"),t.stopPropagation()})}e.init=n}),F.module("superlanding:article/log",function(t,e){function n(){i(),a(),r(),$(document).on("scroll",o(a,200,500))}function i(){c=window.Thunder.create({baseParams:{ct:2,logFrom:"recdetail",logid:window.s_session.logid||"0",ssid:window.s_session.ssid||"0",sid:window.s_session.sid||"0",curRid:window.s_session.nid||"0",qid:window.s_session.qid||"0"}})}function o(t,e,n){var i,o=new Date;return function(){var r=this,a=arguments,s=new Date;clearTimeout(i),s-o>=n?(t.apply(r,a),o=s):i=setTimeout(t,e)}}function r(){$(document).on("click","#detail-page [data-clklog]",function(){var t=this,e=$(t).data("clklog"),n=$(t).data("extralog"),i=$.extend({},s(e));i.logExtra=$.stringify(s(n)),c.send(i)})}function a(){for(var t,e=$("#detail-page").find("[data-showlog]"),n=null,i={},o=l||[],r=$(window).height(),a=$(window).width(),d=0;d<e.length;d++){n=e.eq(d),t=n.data("rid");var u=n.data("ratio")?0:.5;if(-1===$.inArray(t,o)){var h=n.offset().top+n.height()*u-$(window).scrollTop()<r?!0:!1,f=n[0].getBoundingClientRect().left<a?!0:!1;if(h&&f&&"none"!==n.css("display")){if(-1===$.inArray(t,o)){o.push(t);var p=s(n.data("showlog")),g=s(n.data("extralog"));i=$.extend(i,p),i.logExtra=$.stringify(g),c.send(i)}l=o}}}}function s(t){for(var e,n=/(.*?):(.*?);/gi,i={};e=n.exec(t);){var o=e[1],r=e[2];r="flow"===o?parseInt(r,10):r,i[o]=r}return i}var c,l;e.init=n}),F.module("superlanding:article/adProfit",function(t,e){function n(){l=new Date,"u2913118"!==u.advertid&&"u2959678"!==u.advertid?o(u):$("#relateAd").hide()}function i(t){if(f)return void(t&&t());var e=document.getElementsByTagName("body")[0],n=document.createElement("script"),i=0,o=function(){i>=1&&(f=!0,t&&t())},r=0;n.onload=function(){i++,o(),r++},n.onerror=function(){$(".banner-ad-show, .relate-ad-show").remove(),r++};var a=new Date;a=""+a.getFullYear()+a.getMonth()+a.getDate()+a.getHours(),n.src="https://cpro.baidustatic.com/cpro/ui/c.js?v="+a,e.appendChild(n)}function o(t){window.globalErrmsg+="adProfit.js:advertInit start; ";var e=document.getElementById(t.container),n=function(){var n="_"+Math.random().toString(36).slice(2);e&&e.setAttribute("id",n);var i={container:n,id:t.advertid,display:"inlay-fix",rpdn:"po.m.baidu.com",ctkey:t.ctk};!function(){(window.slotbydup=window.slotbydup||[]).push(i)}()};i(n,t,e);var o={ct:12,distributeChannel:11,trafficType:2,nid:window.s_session.nid,pvid:window.s_advert.pvid,baiduid:r("BAIDUID"),logid:window.s_advert.logid,dtime:window.s_advert.dtime,contentType:0,grade:window.s_advert.grade,create_time_acc_level:window.s_advert.createTimeAccLevel,uk:window.s_advert.contentAccId,isBjh:window.s_advert.isBjh,contentPlatformId:window.s_advert.contentPlatformId,contentAccType:window.s_advert.contentAccType,osid:0};if(h){h.commissionInit(o);var s={CTK:window.s_advert.ctk,stay_time:0,logtype:1};u.advertid&&(s.tu=u.advertid);var c=h.getPageShowParams(s);h.sendLog(c),a()}}function r(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(n))?unescape(e[2]):null}function a(){var t=$(".wangmeng-ad").offset().top,e=window.s_advert.ctk_b;$(document).on("scroll",function(){clearTimeout(c),c=setTimeout(function(){s(t,"relate",e)},10)})}function s(t,e,n){var i=$(window).height(),o=$(document).scrollTop();if(i>t-o){var r=new Date;if(!d[e]){var a={CTK:n,stay_time:r-l,logtype:2,position:e};u.advertid&&(a.tu=u.advertid);var s=h.getPageShowParams(a);h.sendLog(s),d[e]=!0}}}var c,l,d={},u={type:"relate",container:"relateAd",ctk:window.s_advert.ctk};if(window.commissions)var h=new commissions;-1===window.s_session.sid.indexOf("22526")&&-1===window.s_session.sid.indexOf("22525")?u.advertid=+window.s_advert.isBjh?"u2913176":"u2959677":-1!==window.s_session.sid.indexOf("22526")?u.advertid=+window.s_advert.isBjh?"u2913118":"u2959678":-1!==window.s_session.sid.indexOf("22525")&&(u.advertid=+window.s_advert.isBjh?"u2959675":"u2959680"),-1!==window.s_session.sid.indexOf("24331")?u.advertid=+window.s_advert.isBjh?"u3058778":"u3057965":-1!==window.s_session.sid.indexOf("24330")&&(u.advertid=+window.s_advert.isBjh?"u3058776":"u3057975");var f=(window.Thunder.create({baseParams:{ct:2,logFrom:"recdetail",ssid:window.s_session.ssid||""}}),!1);e.advertInit=o,e.init=n}),F.module("superlanding:article/video",function(t,e){function n(){o(),s()}function i(t){if(!t){var t=u.event;t.cancelBubble=!0}t.stopPropagation&&t.stopPropagation()}function o(){l={ct:2,logFrom:"recdetail",logInfo:"main_video",logid:u.s_session.logid||"0",ssid:u.s_session.ssid||"0",sid:u.s_session.sid||"0",qid:u.s_session.qid||"0"},c=u.Thunder.create({baseParams:l})}function r(t){return t.hasClass("video-open")?(t.siblings("video").attr("controls"),t.attr("controls",""),t.removeClass("video-open").addClass("video-process"),t[0].pause(),!0):!1}function a(t){$(".video-player").each(function(e,n){t&&d&&d[e]===t||r($(n))})}function s(){var t=this;d=$(".video-container").map(function(t,e){return $(e).data("rid")}),$(".article-content").on("click",".video-player, .video-icon",function(e){e&&e.preventDefault?e.preventDefault():u.event.returnValue=!1;var n={};$(this).siblings("video").attr("controls"),$(this).attr("controls","");var o=$(this).parents(".video-container").data("rid"),s={vid:o,state:"starton",rid:u.s_session.nid};i(e),c.send($.extend({tid:"951",cst:2,logExtra:JSON.stringify(s)},l));var d=function(t){F.call("superlanding:article/music","pauseAllAudio"),a(o),$(t.target).hasClass("video-open")||$(t.target).removeClass("video-process").addClass("video-open"),i(t),6===n.type?(s.state="playon",n.type=1):4===n.type&&(s.state="replay",n.type=2),c.send($.extend({tid:"953",cst:2,logExtra:JSON.stringify(s)},l))},h=function(e){$(e.target).hasClass("video-open")&&$(e.target).removeClass("video-open").addClass("video-process"),i(e),t.$playingVideo[0].currentTime<t.$playingVideo[0].duration-1&&(n.type=3,s.state="pause",c.send($.extend({tid:"952",cst:2,logExtra:JSON.stringify(s)},l))),n.type=6},f=function(e){$(e.target).hasClass("video-open")&&$(e.target).removeClass("video-open").addClass("video-process"),i(e),n.type=4,s.state="playend",s.duration=t.$playingVideo[0].duration,c.send($.extend({tid:"954",cst:2,logExtra:JSON.stringify(s)},l))},p=$(this).siblings("video").length?$(this).siblings("video"):$(this);t.$playingVideo=p,r(p)||(F.call("superlanding:article/music","pauseAllAudio"),a(o),t.$playingVideo[0].play(),p.addClass("video-open")),t.$playingVideo.on("play",d),t.$playingVideo.on("pause",h),t.$playingVideo.on("ended",f)})}var c,l,d,u=window;e.init=n,e.pauseAllVideo=a}),F.module("superlanding:article/music",function(t,e){function n(){u=h.Thunder.create({baseParams:{ct:2,logFrom:"recdetail",logid:h.s_session.logid||"0",ssid:h.s_session.ssid||"0",sid:h.s_session.sid||"0",qid:h.s_session.qid||"0"}}),v=o(),d(),i()}function i(){var t=function(t,e){u.send({tid:b[t].show.tid,cst:1,logInfo:b[t].show.logInfo,logExtra:JSON.stringify(e.map(function(t){return{rid:h.s_session.nid,songid:t.songid,file_duration:t.duration+""}}))})};if(v.length){var e=[],n=[];v.forEach(function(t){"music"===t.type?n.push(t):e.push(t)}),n.length&&t("music",n),e.length&&t("mthaudio",e)}}function o(){for(var t=[],e=0;e<p.length;e++)t.push({type:$(p[e]).attr("data-type"),index:$(p[e]).attr("data-index"),songid:$(p[e]).attr("data-songid"),src:$(p[e]).attr("data-file-link"),duration:$(p[e]).attr("data-duration")||"",currentTime:0});return t}function r(t){if(!t){var t=h.event;t.cancelBubble=!0}t.stopPropagation&&t.stopPropagation()}function a(t,e,n){v[t][e]=n}function s(t,e,n){var i=g.attr("data-play-index")||null,o=v[e],r=o.src;r&&(i!==e&&(i&&a(i,"currentTime",g[0].currentTime),g[0].src=r,g.attr("data-play-index",e),$(m).attr("src",r)),c(),1===t?(F.call("superlanding:article/video","pauseAllVideo"),l(e),n.removeClass("pause").addClass("play"),g[0].currentTime=o.currentTime,g[0].play()):(n.removeClass("play").addClass("pause"),g[0].pause(),a(e,"currentTime",g[0].currentTime)))}function c(){p.removeClass("play").addClass("pause")}function l(t){p.each(function(e,n){t!==e&&$(n).hasClass("play")&&s(0,e,$(n))})}function d(){g.on("canplay",function(){var t=$(this).attr("data-play-index")||null;if(t){a(t,"duration",this.duration);var e=v[t],n=b[e.type].play;u.send({tid:n.tid,cst:2,logInfo:n.logInfo,logExtra:JSON.stringify({rid:h.s_session.nid,songid:e.songid,file_duration:e.duration+""})})}}).on("pause",function(){var t=g.attr("data-play-index")||null,e=v[t],n=b[e.type].pause;u.send({tid:n.tid,cst:2,logInfo:n.logInfo,logExtra:JSON.stringify({rid:h.s_session.nid,songid:e.songid,file_duration:e.duration+""})})}).on("ended",function(){var t=g.attr("data-play-index")||null;g[0].pause(),c(),t&&a(t,"currentTime",0)}),f.delegate(".music-container .audio-play-btn","click",function(t){var e=$(this).closest(".music-container"),n=e.attr("data-index"),i=v[n];"music"!==i.type||i.src?e.hasClass("play")?s(0,n,e):s(1,n,e):$.ajax({url:"https://mbd.baidu.com/newspage/api/getmusiclink",type:"GET",dataType:"jsonp",jsonp:"cb",data:{songid:i.songid},success:function(t){0===t.errno&&(a(n,"src",t.data.file_link),c(),e.removeClass("pause").addClass("play"),s(1,n,e))},error:function(){}}),r(t)})}var u,h=window,f=$(".article-content"),p=$(".music-container"),g=$("#musicAudio"),m=$("#musicAudio source"),v=[],b={music:{show:{tid:"1285",logInfo:"main_audio_show"},play:{tid:"1288",logInfo:"main_audio_played"},pause:{tid:"1289",logInfo:"main_audio_pause"}},mthaudio:{show:{tid:"2118",logInfo:"main_real_audio_show"},play:{tid:"2119",logInfo:"main_real_audio_play"},pause:{tid:"2120",logInfo:"main_real_audio_pause"}}};e.init=n,e.pauseAllAudio=l}),F.module("superlanding:article/richText",function(t,e){function n(){r=a.Thunder.create({baseParams:{ct:2,logFrom:"recdetail",logid:a.s_session.logid||"0",ssid:a.s_session.ssid||"0",sid:a.s_session.sid||"0",qid:a.s_session.qid||"0"}}),i(),o()}function i(){var t=s.find(".searchWord");if(t.length){var e=[];t.each(function(){e.push($(this).text())}),r.send({tid:"10218",cst:1,logInfo:"content_search_word",logExtra:JSON.stringify([{keyword:e.join(",")}])})}}function o(){s.delegate("p","click",function(t){t&&t.preventDefault();var e=t.target;e.className.indexOf("searchWord")>-1&&r.send({tid:"10219",cst:2,logInfo:"content_search_word",logExtra:JSON.stringify({keyword:e.innerText})},function(){location.href=e.getAttribute("data-bjh-src")})})}var r,a=window,s=$(".article-content");e.init=n}),F.module("superlanding:article/qrcode",function(t,e){function n(){i()}function i(){o.qrcode({render:"canvas",width:200,height:200,text:o.data("url"),src:o.data("logo")})}var o=$("#j_qrcode-landingpage");e.init=n});